var zr=Object.defineProperty;var Vr=(t,e,n)=>e in t?zr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ln=(t,e,n)=>(Vr(t,typeof e!="symbol"?e+"":e,n),n);import{s as ve,u as Hr,r as k,j as ee,a as U,L as Nn,S as Wr}from"./index.271201a4.js";var sr={exports:{}};(function(t,e){(function(n){t.exports=n()})(function(n){var r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function a(v,l){var o=v[0],i=v[1],u=v[2],s=v[3];o+=(i&u|~i&s)+l[0]-680876936|0,o=(o<<7|o>>>25)+i|0,s+=(o&i|~o&u)+l[1]-389564586|0,s=(s<<12|s>>>20)+o|0,u+=(s&o|~s&i)+l[2]+606105819|0,u=(u<<17|u>>>15)+s|0,i+=(u&s|~u&o)+l[3]-1044525330|0,i=(i<<22|i>>>10)+u|0,o+=(i&u|~i&s)+l[4]-176418897|0,o=(o<<7|o>>>25)+i|0,s+=(o&i|~o&u)+l[5]+1200080426|0,s=(s<<12|s>>>20)+o|0,u+=(s&o|~s&i)+l[6]-1473231341|0,u=(u<<17|u>>>15)+s|0,i+=(u&s|~u&o)+l[7]-45705983|0,i=(i<<22|i>>>10)+u|0,o+=(i&u|~i&s)+l[8]+1770035416|0,o=(o<<7|o>>>25)+i|0,s+=(o&i|~o&u)+l[9]-1958414417|0,s=(s<<12|s>>>20)+o|0,u+=(s&o|~s&i)+l[10]-42063|0,u=(u<<17|u>>>15)+s|0,i+=(u&s|~u&o)+l[11]-1990404162|0,i=(i<<22|i>>>10)+u|0,o+=(i&u|~i&s)+l[12]+1804603682|0,o=(o<<7|o>>>25)+i|0,s+=(o&i|~o&u)+l[13]-40341101|0,s=(s<<12|s>>>20)+o|0,u+=(s&o|~s&i)+l[14]-1502002290|0,u=(u<<17|u>>>15)+s|0,i+=(u&s|~u&o)+l[15]+1236535329|0,i=(i<<22|i>>>10)+u|0,o+=(i&s|u&~s)+l[1]-165796510|0,o=(o<<5|o>>>27)+i|0,s+=(o&u|i&~u)+l[6]-1069501632|0,s=(s<<9|s>>>23)+o|0,u+=(s&i|o&~i)+l[11]+643717713|0,u=(u<<14|u>>>18)+s|0,i+=(u&o|s&~o)+l[0]-373897302|0,i=(i<<20|i>>>12)+u|0,o+=(i&s|u&~s)+l[5]-701558691|0,o=(o<<5|o>>>27)+i|0,s+=(o&u|i&~u)+l[10]+38016083|0,s=(s<<9|s>>>23)+o|0,u+=(s&i|o&~i)+l[15]-660478335|0,u=(u<<14|u>>>18)+s|0,i+=(u&o|s&~o)+l[4]-405537848|0,i=(i<<20|i>>>12)+u|0,o+=(i&s|u&~s)+l[9]+568446438|0,o=(o<<5|o>>>27)+i|0,s+=(o&u|i&~u)+l[14]-1019803690|0,s=(s<<9|s>>>23)+o|0,u+=(s&i|o&~i)+l[3]-187363961|0,u=(u<<14|u>>>18)+s|0,i+=(u&o|s&~o)+l[8]+1163531501|0,i=(i<<20|i>>>12)+u|0,o+=(i&s|u&~s)+l[13]-1444681467|0,o=(o<<5|o>>>27)+i|0,s+=(o&u|i&~u)+l[2]-51403784|0,s=(s<<9|s>>>23)+o|0,u+=(s&i|o&~i)+l[7]+1735328473|0,u=(u<<14|u>>>18)+s|0,i+=(u&o|s&~o)+l[12]-1926607734|0,i=(i<<20|i>>>12)+u|0,o+=(i^u^s)+l[5]-378558|0,o=(o<<4|o>>>28)+i|0,s+=(o^i^u)+l[8]-2022574463|0,s=(s<<11|s>>>21)+o|0,u+=(s^o^i)+l[11]+1839030562|0,u=(u<<16|u>>>16)+s|0,i+=(u^s^o)+l[14]-35309556|0,i=(i<<23|i>>>9)+u|0,o+=(i^u^s)+l[1]-1530992060|0,o=(o<<4|o>>>28)+i|0,s+=(o^i^u)+l[4]+1272893353|0,s=(s<<11|s>>>21)+o|0,u+=(s^o^i)+l[7]-155497632|0,u=(u<<16|u>>>16)+s|0,i+=(u^s^o)+l[10]-1094730640|0,i=(i<<23|i>>>9)+u|0,o+=(i^u^s)+l[13]+681279174|0,o=(o<<4|o>>>28)+i|0,s+=(o^i^u)+l[0]-358537222|0,s=(s<<11|s>>>21)+o|0,u+=(s^o^i)+l[3]-722521979|0,u=(u<<16|u>>>16)+s|0,i+=(u^s^o)+l[6]+76029189|0,i=(i<<23|i>>>9)+u|0,o+=(i^u^s)+l[9]-640364487|0,o=(o<<4|o>>>28)+i|0,s+=(o^i^u)+l[12]-421815835|0,s=(s<<11|s>>>21)+o|0,u+=(s^o^i)+l[15]+530742520|0,u=(u<<16|u>>>16)+s|0,i+=(u^s^o)+l[2]-995338651|0,i=(i<<23|i>>>9)+u|0,o+=(u^(i|~s))+l[0]-198630844|0,o=(o<<6|o>>>26)+i|0,s+=(i^(o|~u))+l[7]+1126891415|0,s=(s<<10|s>>>22)+o|0,u+=(o^(s|~i))+l[14]-1416354905|0,u=(u<<15|u>>>17)+s|0,i+=(s^(u|~o))+l[5]-57434055|0,i=(i<<21|i>>>11)+u|0,o+=(u^(i|~s))+l[12]+1700485571|0,o=(o<<6|o>>>26)+i|0,s+=(i^(o|~u))+l[3]-1894986606|0,s=(s<<10|s>>>22)+o|0,u+=(o^(s|~i))+l[10]-1051523|0,u=(u<<15|u>>>17)+s|0,i+=(s^(u|~o))+l[1]-2054922799|0,i=(i<<21|i>>>11)+u|0,o+=(u^(i|~s))+l[8]+1873313359|0,o=(o<<6|o>>>26)+i|0,s+=(i^(o|~u))+l[15]-30611744|0,s=(s<<10|s>>>22)+o|0,u+=(o^(s|~i))+l[6]-1560198380|0,u=(u<<15|u>>>17)+s|0,i+=(s^(u|~o))+l[13]+1309151649|0,i=(i<<21|i>>>11)+u|0,o+=(u^(i|~s))+l[4]-145523070|0,o=(o<<6|o>>>26)+i|0,s+=(i^(o|~u))+l[11]-1120210379|0,s=(s<<10|s>>>22)+o|0,u+=(o^(s|~i))+l[2]+718787259|0,u=(u<<15|u>>>17)+s|0,i+=(s^(u|~o))+l[9]-343485551|0,i=(i<<21|i>>>11)+u|0,v[0]=o+v[0]|0,v[1]=i+v[1]|0,v[2]=u+v[2]|0,v[3]=s+v[3]|0}function c(v){var l=[],o;for(o=0;o<64;o+=4)l[o>>2]=v.charCodeAt(o)+(v.charCodeAt(o+1)<<8)+(v.charCodeAt(o+2)<<16)+(v.charCodeAt(o+3)<<24);return l}function f(v){var l=[],o;for(o=0;o<64;o+=4)l[o>>2]=v[o]+(v[o+1]<<8)+(v[o+2]<<16)+(v[o+3]<<24);return l}function d(v){var l=v.length,o=[1732584193,-271733879,-1732584194,271733878],i,u,s,h,E,C;for(i=64;i<=l;i+=64)a(o,c(v.substring(i-64,i)));for(v=v.substring(i-64),u=v.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=0;i<u;i+=1)s[i>>2]|=v.charCodeAt(i)<<(i%4<<3);if(s[i>>2]|=128<<(i%4<<3),i>55)for(a(o,s),i=0;i<16;i+=1)s[i]=0;return h=l*8,h=h.toString(16).match(/(.*?)(.{0,8})$/),E=parseInt(h[2],16),C=parseInt(h[1],16)||0,s[14]=E,s[15]=C,a(o,s),o}function p(v){var l=v.length,o=[1732584193,-271733879,-1732584194,271733878],i,u,s,h,E,C;for(i=64;i<=l;i+=64)a(o,f(v.subarray(i-64,i)));for(v=i-64<l?v.subarray(i-64):new Uint8Array(0),u=v.length,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i=0;i<u;i+=1)s[i>>2]|=v[i]<<(i%4<<3);if(s[i>>2]|=128<<(i%4<<3),i>55)for(a(o,s),i=0;i<16;i+=1)s[i]=0;return h=l*8,h=h.toString(16).match(/(.*?)(.{0,8})$/),E=parseInt(h[2],16),C=parseInt(h[1],16)||0,s[14]=E,s[15]=C,a(o,s),o}function y(v){var l="",o;for(o=0;o<4;o+=1)l+=r[v>>o*8+4&15]+r[v>>o*8&15];return l}function g(v){var l;for(l=0;l<v.length;l+=1)v[l]=y(v[l]);return v.join("")}g(d("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function v(l,o){return l=l|0||0,l<0?Math.max(l+o,0):Math.min(l,o)}ArrayBuffer.prototype.slice=function(l,o){var i=this.byteLength,u=v(l,i),s=i,h,E,C,S;return o!==n&&(s=v(o,i)),u>s?new ArrayBuffer(0):(h=s-u,E=new ArrayBuffer(h),C=new Uint8Array(E),S=new Uint8Array(this,u,h),C.set(S),E)}}();function m(v){return/[\u0080-\uFFFF]/.test(v)&&(v=unescape(encodeURIComponent(v))),v}function _(v,l){var o=v.length,i=new ArrayBuffer(o),u=new Uint8Array(i),s;for(s=0;s<o;s+=1)u[s]=v.charCodeAt(s);return l?u:i}function x(v){return String.fromCharCode.apply(null,new Uint8Array(v))}function A(v,l,o){var i=new Uint8Array(v.byteLength+l.byteLength);return i.set(new Uint8Array(v)),i.set(new Uint8Array(l),v.byteLength),o?i:i.buffer}function b(v){var l=[],o=v.length,i;for(i=0;i<o-1;i+=2)l.push(parseInt(v.substr(i,2),16));return String.fromCharCode.apply(String,l)}function w(){this.reset()}return w.prototype.append=function(v){return this.appendBinary(m(v)),this},w.prototype.appendBinary=function(v){this._buff+=v,this._length+=v.length;var l=this._buff.length,o;for(o=64;o<=l;o+=64)a(this._hash,c(this._buff.substring(o-64,o)));return this._buff=this._buff.substring(o-64),this},w.prototype.end=function(v){var l=this._buff,o=l.length,i,u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],s;for(i=0;i<o;i+=1)u[i>>2]|=l.charCodeAt(i)<<(i%4<<3);return this._finish(u,o),s=g(this._hash),v&&(s=b(s)),this.reset(),s},w.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},w.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},w.prototype.setState=function(v){return this._buff=v.buff,this._length=v.length,this._hash=v.hash,this},w.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},w.prototype._finish=function(v,l){var o=l,i,u,s;if(v[o>>2]|=128<<(o%4<<3),o>55)for(a(this._hash,v),o=0;o<16;o+=1)v[o]=0;i=this._length*8,i=i.toString(16).match(/(.*?)(.{0,8})$/),u=parseInt(i[2],16),s=parseInt(i[1],16)||0,v[14]=u,v[15]=s,a(this._hash,v)},w.hash=function(v,l){return w.hashBinary(m(v),l)},w.hashBinary=function(v,l){var o=d(v),i=g(o);return l?b(i):i},w.ArrayBuffer=function(){this.reset()},w.ArrayBuffer.prototype.append=function(v){var l=A(this._buff.buffer,v,!0),o=l.length,i;for(this._length+=v.byteLength,i=64;i<=o;i+=64)a(this._hash,f(l.subarray(i-64,i)));return this._buff=i-64<o?new Uint8Array(l.buffer.slice(i-64)):new Uint8Array(0),this},w.ArrayBuffer.prototype.end=function(v){var l=this._buff,o=l.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],u,s;for(u=0;u<o;u+=1)i[u>>2]|=l[u]<<(u%4<<3);return this._finish(i,o),s=g(this._hash),v&&(s=b(s)),this.reset(),s},w.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},w.ArrayBuffer.prototype.getState=function(){var v=w.prototype.getState.call(this);return v.buff=x(v.buff),v},w.ArrayBuffer.prototype.setState=function(v){return v.buff=_(v.buff,!0),w.prototype.setState.call(this,v)},w.ArrayBuffer.prototype.destroy=w.prototype.destroy,w.ArrayBuffer.prototype._finish=w.prototype._finish,w.ArrayBuffer.hash=function(v,l){var o=p(new Uint8Array(v)),i=g(o);return l?b(i):i},w})})(sr);const Yr=sr.exports;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var O=function(){return O=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e},O.apply(this,arguments)};function Gt(t,e,n){if(n||arguments.length===2)for(var r=0,a=e.length,c;r<a;r++)(c||!(r in e))&&(c||(c=Array.prototype.slice.call(e,0,r)),c[r]=e[r]);return t.concat(c||Array.prototype.slice.call(e))}var N=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,X=Object.keys,ne=Array.isArray;typeof Promise<"u"&&!N.Promise&&(N.Promise=Promise);function ie(t,e){return typeof e!="object"||X(e).forEach(function(n){t[n]=e[n]}),t}var ut=Object.getPrototypeOf,$r={}.hasOwnProperty;function ce(t,e){return $r.call(t,e)}function Xe(t,e){typeof e=="function"&&(e=e(ut(t))),(typeof Reflect>"u"?X:Reflect.ownKeys)(e).forEach(function(n){Ce(t,n,e[n])})}var cr=Object.defineProperty;function Ce(t,e,n,r){cr(t,e,ie(n&&ce(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function Ge(t){return{from:function(e){return t.prototype=Object.create(e.prototype),Ce(t.prototype,"constructor",t),{extend:Xe.bind(null,t.prototype)}}}}var Qr=Object.getOwnPropertyDescriptor;function wn(t,e){var n=Qr(t,e),r;return n||(r=ut(t))&&wn(r,e)}var Xr=[].slice;function Lt(t,e,n){return Xr.call(t,e,n)}function lr(t,e){return e(t)}function et(t){if(!t)throw new Error("Assertion Failed")}function fr(t){N.setImmediate?setImmediate(t):setTimeout(t,0)}function hr(t,e){return t.reduce(function(n,r,a){var c=e(r,a);return c&&(n[c[0]]=c[1]),n},{})}function Gr(t,e,n){try{t.apply(null,n)}catch(r){e&&e(r)}}function Ee(t,e){if(ce(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,a=e.length;r<a;++r){var c=Ee(t,e[r]);n.push(c)}return n}var f=e.indexOf(".");if(f!==-1){var d=t[e.substr(0,f)];return d===void 0?void 0:Ee(d,e.substr(f+1))}}function fe(t,e,n){if(!(!t||e===void 0)&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){et(typeof n!="string"&&"length"in n);for(var r=0,a=e.length;r<a;++r)fe(t,e[r],n[r])}else{var c=e.indexOf(".");if(c!==-1){var f=e.substr(0,c),d=e.substr(c+1);if(d==="")n===void 0?ne(t)&&!isNaN(parseInt(f))?t.splice(f,1):delete t[f]:t[f]=n;else{var p=t[f];(!p||!ce(t,f))&&(p=t[f]={}),fe(p,d,n)}}else n===void 0?ne(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function Jr(t,e){typeof e=="string"?fe(t,e,void 0):"length"in e&&[].map.call(e,function(n){fe(t,n,void 0)})}function dr(t){var e={};for(var n in t)ce(t,n)&&(e[n]=t[n]);return e}var qr=[].concat;function pr(t){return qr.apply([],t)}var vr="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(pr([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(e){return e+t+"Array"})}))).filter(function(t){return N[t]}),Zr=vr.map(function(t){return N[t]});hr(vr,function(t){return[t,!0]});var Ie=null;function ht(t){Ie=typeof WeakMap<"u"&&new WeakMap;var e=Jt(t);return Ie=null,e}function Jt(t){if(!t||typeof t!="object")return t;var e=Ie&&Ie.get(t);if(e)return e;if(ne(t)){e=[],Ie&&Ie.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(Jt(t[n]))}else if(Zr.indexOf(t.constructor)>=0)e=t;else{var a=ut(t);e=a===Object.prototype?{}:Object.create(a),Ie&&Ie.set(t,e);for(var c in t)ce(t,c)&&(e[c]=Jt(t[c]))}return e}var ei={}.toString;function qt(t){return ei.call(t).slice(8,-1)}var Zt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ti=typeof Zt=="symbol"?function(t){var e;return t!=null&&(e=t[Zt])&&e.apply(t)}:function(){return null},$e={};function Ae(t){var e,n,r,a;if(arguments.length===1){if(ne(t))return t.slice();if(this===$e&&typeof t=="string")return[t];if(a=ti(t)){for(n=[];r=a.next(),!r.done;)n.push(r.value);return n}if(t==null)return[t];if(e=t.length,typeof e=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}var An=typeof Symbol<"u"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},ye=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function yr(t,e){ye=t,mr=e}var mr=function(){return!0},ni=!new Error("").stack;function ze(){if(ni)try{throw ze.arguments,new Error}catch(t){return t}return new Error}function en(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(mr).map(function(r){return`
`+r}).join("")):""}var ri=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],gr=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],xn=ri.concat(gr),ii={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Je(t,e){this._e=ze(),this.name=t,this.message=e}Ge(Je).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+en(this._e,2))}},toString:function(){return this.name+": "+this.message}});function br(t,e){return t+". Errors: "+Object.keys(e).map(function(n){return e[n].toString()}).filter(function(n,r,a){return a.indexOf(n)===r}).join(`
`)}function Kt(t,e,n,r){this._e=ze(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=br(t,e)}Ge(Kt).from(Je);function nt(t,e){this._e=ze(),this.name="BulkError",this.failures=Object.keys(e).map(function(n){return e[n]}),this.failuresByPos=e,this.message=br(t,e)}Ge(nt).from(Je);var En=xn.reduce(function(t,e){return t[e]=e+"Error",t},{}),ui=Je,D=xn.reduce(function(t,e){var n=e+"Error";function r(a,c){this._e=ze(),this.name=n,a?typeof a=="string"?(this.message=""+a+(c?`
 `+c:""),this.inner=c||null):typeof a=="object"&&(this.message=a.name+" "+a.message,this.inner=a):(this.message=ii[e]||n,this.inner=null)}return Ge(r).from(ui),t[e]=r,t},{});D.Syntax=SyntaxError;D.Type=TypeError;D.Range=RangeError;var Un=gr.reduce(function(t,e){return t[e+"Error"]=D[e],t},{});function ai(t,e){if(!t||t instanceof Je||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Un[t.name])return t;var n=new Un[t.name](e||t.message,t);return"stack"in t&&Ce(n,"stack",{get:function(){return this.inner.stack}}),n}var Nt=xn.reduce(function(t,e){return["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=D[e]),t},{});Nt.ModifyError=Kt;Nt.DexieError=Je;Nt.BulkError=nt;function j(){}function dt(t){return t}function oi(t,e){return t==null||t===dt?e:function(n){return e(t(n))}}function Ne(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function si(t,e){return t===j?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var c=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Ne(r,this.onsuccess):r),a&&(this.onerror=this.onerror?Ne(a,this.onerror):a),c!==void 0?c:n}}function ci(t,e){return t===j?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Ne(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Ne(r,this.onerror):r)}}function li(t,e){return t===j?e:function(n){var r=t.apply(this,arguments);ie(n,r);var a=this.onsuccess,c=this.onerror;this.onsuccess=null,this.onerror=null;var f=e.apply(this,arguments);return a&&(this.onsuccess=this.onsuccess?Ne(a,this.onsuccess):a),c&&(this.onerror=this.onerror?Ne(c,this.onerror):c),r===void 0?f===void 0?void 0:f:ie(r,f)}}function fi(t,e){return t===j?e:function(){return e.apply(this,arguments)===!1?!1:t.apply(this,arguments)}}function Cn(t,e){return t===j?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,a=arguments.length,c=new Array(a);a--;)c[a]=arguments[a];return n.then(function(){return e.apply(r,c)})}return e.apply(this,arguments)}}var at={},hi=100,di=20,_r=100,Sn=typeof Promise>"u"?[]:function(){var t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,ut(t),t];var e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,ut(e),t]}(),tn=Sn[0],It=Sn[1],nn=Sn[2],wr=It&&It.then,xt=tn&&tn.constructor,Bn=!!nn,rn=!1,pi=nn?function(){nn.then(gt)}:N.setImmediate?setImmediate.bind(null,gt):N.MutationObserver?function(){var t=document.createElement("div");new MutationObserver(function(){gt(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:function(){setTimeout(gt,0)},ot=function(t,e){tt.push([t,e]),Ft&&(pi(),Ft=!1)},un=!0,Ft=!0,je=[],Et=[],an=null,on=dt,Qe={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Hn,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(t){try{Hn(t[0],t[1])}catch{}})}},T=Qe,tt=[],Le=0,Ct=[];function B(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=j,this._lib=!1;var e=this._PSD=T;if(ye&&(this._stackHolder=ze(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==at)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&cn(this,this._value);return}this._state=null,this._value=null,++e.ref,xr(this,t)}var sn={get:function(){var t=T,e=Dt;function n(r,a){var c=this,f=!t.global&&(t!==T||e!==Dt),d=f&&!Se(),p=new B(function(y,g){Tn(c,new Ar(Mt(r,t,f,d),Mt(a,t,f,d),y,g,t))});return ye&&Sr(p,this),p}return n.prototype=at,n},set:function(t){Ce(this,"then",t&&t.prototype===at?sn:{get:function(){return t},set:sn.set})}};Xe(B.prototype,{then:sn,_then:function(t,e){Tn(this,new Ar(null,null,t,e,T))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,function(r){return r instanceof e?n(r):St(r)}):this.then(null,function(r){return r&&r.name===e?n(r):St(r)})},finally:function(t){return this.then(function(e){return t(),e},function(e){return t(),St(e)})},stack:{get:function(){if(this._stack)return this._stack;try{rn=!0;var t=Cr(this,[],di),e=t.join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{rn=!1}}},timeout:function(t,e){var n=this;return t<1/0?new B(function(r,a){var c=setTimeout(function(){return a(new D.Timeout(e))},t);n.then(r,a).finally(clearTimeout.bind(null,c))}):this}});typeof Symbol<"u"&&Symbol.toStringTag&&Ce(B.prototype,Symbol.toStringTag,"Dexie.Promise");Qe.env=Br();function Ar(t,e,n,r,a){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=a}Xe(B,{all:function(){var t=Ae.apply(null,arguments).map(Pt);return new B(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach(function(a,c){return B.resolve(a).then(function(f){t[c]=f,--r||e(t)},n)})})},resolve:function(t){if(t instanceof B)return t;if(t&&typeof t.then=="function")return new B(function(n,r){t.then(n,r)});var e=new B(at,!0,t);return Sr(e,an),e},reject:St,race:function(){var t=Ae.apply(null,arguments).map(Pt);return new B(function(e,n){t.map(function(r){return B.resolve(r).then(e,n)})})},PSD:{get:function(){return T},set:function(t){return T=t}},totalEchoes:{get:function(){return Dt}},newPSD:De,usePSD:Ze,scheduler:{get:function(){return ot},set:function(t){ot=t}},rejectionMapper:{get:function(){return on},set:function(t){on=t}},follow:function(t,e){return new B(function(n,r){return De(function(a,c){var f=T;f.unhandleds=[],f.onunhandled=c,f.finalize=Ne(function(){var d=this;yi(function(){d.unhandleds.length===0?a():c(d.unhandleds[0])})},f.finalize),t()},e,n,r)})}});xt&&(xt.allSettled&&Ce(B,"allSettled",function(){var t=Ae.apply(null,arguments).map(Pt);return new B(function(e){t.length===0&&e([]);var n=t.length,r=new Array(n);t.forEach(function(a,c){return B.resolve(a).then(function(f){return r[c]={status:"fulfilled",value:f}},function(f){return r[c]={status:"rejected",reason:f}}).then(function(){return--n||e(r)})})})}),xt.any&&typeof AggregateError<"u"&&Ce(B,"any",function(){var t=Ae.apply(null,arguments).map(Pt);return new B(function(e,n){t.length===0&&n(new AggregateError([]));var r=t.length,a=new Array(r);t.forEach(function(c,f){return B.resolve(c).then(function(d){return e(d)},function(d){a[f]=d,--r||n(new AggregateError(a))})})})}));function xr(t,e){try{e(function(n){if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&pt();n&&typeof n.then=="function"?xr(t,function(a,c){n instanceof B?n._then(a,c):n.then(a,c)}):(t._state=!0,t._value=n,Er(t)),r&&vt()}},cn.bind(null,t))}catch(n){cn(t,n)}}function cn(t,e){if(Et.push(e),t._state===null){var n=t._lib&&pt();e=on(e),t._state=!1,t._value=e,ye&&e!==null&&typeof e=="object"&&!e._promise&&Gr(function(){var r=wn(e,"stack");e._promise=t,Ce(e,"stack",{get:function(){return rn?r&&(r.get?r.get.apply(e):r.value):t.stack}})}),mi(t),Er(t),n&&vt()}}function Er(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)Tn(t,e[n]);var a=t._PSD;--a.ref||a.finalize(),Le===0&&(++Le,ot(function(){--Le===0&&Kn()},[]))}function Tn(t,e){if(t._state===null){t._listeners.push(e);return}var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Le,ot(vi,[n,t,e])}function vi(t,e,n){try{an=e;var r,a=e._value;e._state?r=t(a):(Et.length&&(Et=[]),r=t(a),Et.indexOf(a)===-1&&gi(e)),n.resolve(r)}catch(c){n.reject(c)}finally{an=null,--Le===0&&Kn(),--n.psd.ref||n.psd.finalize()}}function Cr(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var a=t._value,c,f;a!=null?(c=a.name||"Error",f=a.message||a,r=en(a,0)):(c=a,f=""),e.push(c+(f?": "+f:"")+r)}return ye&&(r=en(t._stackHolder,2),r&&e.indexOf(r)===-1&&e.push(r),t._prev&&Cr(t._prev,e,n)),e}function Sr(t,e){var n=e?e._numPrev+1:0;n<hi&&(t._prev=e,t._numPrev=n)}function gt(){pt()&&vt()}function pt(){var t=un;return un=!1,Ft=!1,t}function vt(){var t,e,n;do for(;tt.length>0;)for(t=tt,tt=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(tt.length>0);un=!0,Ft=!0}function Kn(){var t=je;je=[],t.forEach(function(r){r._PSD.onunhandled.call(null,r._value,r)});for(var e=Ct.slice(0),n=e.length;n;)e[--n]()}function yi(t){function e(){t(),Ct.splice(Ct.indexOf(e),1)}Ct.push(e),++Le,ot(function(){--Le===0&&Kn()},[])}function mi(t){je.some(function(e){return e._value===t._value})||je.push(t)}function gi(t){for(var e=je.length;e;)if(je[--e]._value===t._value){je.splice(e,1);return}}function St(t){return new B(at,!1,t)}function z(t,e){var n=T;return function(){var r=pt(),a=T;try{return Pe(n,!0),t.apply(this,arguments)}catch(c){e&&e(c)}finally{Pe(a,!1),r&&vt()}}}var te={awaits:0,echoes:0,id:0},bi=0,Bt=[],Vt=0,Dt=0,_i=0;function De(t,e,n,r){var a=T,c=Object.create(a);c.parent=a,c.ref=0,c.global=!1,c.id=++_i;var f=Qe.env;c.env=Bn?{Promise:B,PromiseProp:{value:B,configurable:!0,writable:!0},all:B.all,race:B.race,allSettled:B.allSettled,any:B.any,resolve:B.resolve,reject:B.reject,nthen:zn(f.nthen,c),gthen:zn(f.gthen,c)}:{},e&&ie(c,e),++a.ref,c.finalize=function(){--this.parent.ref||this.parent.finalize()};var d=Ze(c,t,n,r);return c.ref===0&&c.finalize(),d}function qe(){return te.id||(te.id=++bi),++te.awaits,te.echoes+=_r,te.id}function Se(){return te.awaits?(--te.awaits===0&&(te.id=0),te.echoes=te.awaits*_r,!0):!1}(""+wr).indexOf("[native code]")===-1&&(qe=Se=j);function Pt(t){return te.echoes&&t&&t.constructor===xt?(qe(),t.then(function(e){return Se(),e},function(e){return Se(),G(e)})):t}function wi(t){++Dt,(!te.echoes||--te.echoes===0)&&(te.echoes=te.id=0),Bt.push(T),Pe(t,!0)}function Ai(){var t=Bt[Bt.length-1];Bt.pop(),Pe(t,!1)}function Pe(t,e){var n=T;if((e?te.echoes&&(!Vt++||t!==T):Vt&&(!--Vt||t!==T))&&Tr(e?wi.bind(null,t):Ai),t!==T&&(T=t,n===Qe&&(Qe.env=Br()),Bn)){var r=Qe.env.Promise,a=t.env;It.then=a.nthen,r.prototype.then=a.gthen,(n.global||t.global)&&(Object.defineProperty(N,"Promise",a.PromiseProp),r.all=a.all,r.race=a.race,r.resolve=a.resolve,r.reject=a.reject,a.allSettled&&(r.allSettled=a.allSettled),a.any&&(r.any=a.any))}}function Br(){var t=N.Promise;return Bn?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(N,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:It.then,gthen:t.prototype.then}:{}}function Ze(t,e,n,r,a){var c=T;try{return Pe(t,!0),e(n,r,a)}finally{Pe(c,!1)}}function Tr(t){wr.call(tn,t)}function Mt(t,e,n,r){return typeof t!="function"?t:function(){var a=T;n&&qe(),Pe(e,!0);try{return t.apply(this,arguments)}finally{Pe(a,!1),r&&Tr(Se)}}}function zn(t,e){return function(n,r){return t.call(this,Mt(n,e),Mt(r,e))}}var Vn="unhandledrejection";function Hn(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,a={promise:e,reason:t};if(N.document&&document.createEvent?(r=document.createEvent("Event"),r.initEvent(Vn,!0,!0),ie(r,a)):N.CustomEvent&&(r=new CustomEvent(Vn,{detail:a}),ie(r,a)),r&&N.dispatchEvent&&(dispatchEvent(r),!N.PromiseRejectionEvent&&N.onunhandledrejection))try{N.onunhandledrejection(r)}catch{}ye&&r&&!r.defaultPrevented&&console.warn("Unhandled rejection: "+(t.stack||t))}catch{}}var G=B.reject;function ln(t,e,n,r){if(!t.idbdb||!t._state.openComplete&&!T.letThrough&&!t._vip){if(t._state.openComplete)return G(new D.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return G(new D.DatabaseClosed);t.open().catch(j)}return t._state.dbReadyPromise.then(function(){return ln(t,e,n,r)})}else{var a=t._createTransaction(e,n,t._dbSchema);try{a.create(),t._state.PR1398_maxLoop=3}catch(c){return c.name===En.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(function(){return ln(t,e,n,r)})):G(c)}return a._promise(e,function(c,f){return De(function(){return T.trans=a,r(c,f,a)})}).then(function(c){return a._completion.then(function(){return c})})}}var Wn="3.2.2",ke=String.fromCharCode(65535),fn=-1/0,_e="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Kr="String expected.",rt=[],Ut=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),xi=Ut,Ei=Ut,Ir=function(t){return!/(dexie\.js|dexie\.min\.js)/.test(t)},zt="__dbnames",Ht="readonly",Wt="readwrite";function Ue(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}var Fr={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function bt(t){return typeof t=="string"&&!/\./.test(t)?function(e){return e[t]===void 0&&t in e&&(e=ht(e),delete e[t]),e}:function(e){return e}}var Ci=function(){function t(){}return t.prototype._trans=function(e,n,r){var a=this._tx||T.trans,c=this.name;function f(p,y,g){if(!g.schema[c])throw new D.NotFound("Table "+c+" not part of transaction");return n(g.idbtrans,g)}var d=pt();try{return a&&a.db===this.db?a===T.trans?a._promise(e,f,r):De(function(){return a._promise(e,f,r)},{trans:a,transless:T.transless||T}):ln(this.db,e,[this.name],f)}finally{d&&vt()}},t.prototype.get=function(e,n){var r=this;return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",function(a){return r.core.get({trans:a,key:e}).then(function(c){return r.hook.reading.fire(c)})}).then(n)},t.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(ne(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var n=X(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(g){return g.compound&&n.every(function(m){return g.keyPath.indexOf(m)>=0})&&g.keyPath.every(function(m){return n.indexOf(m)>=0})})[0];if(r&&this.db._maxKey!==ke)return this.where(r.name).equals(r.keyPath.map(function(g){return e[g]}));!r&&ye&&console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a "+("compound index ["+n.join("+")+"]"));var a=this.schema.idxByName,c=this.db._deps.indexedDB;function f(g,m){try{return c.cmp(g,m)===0}catch{return!1}}var d=n.reduce(function(g,m){var _=g[0],x=g[1],A=a[m],b=e[m];return[_||A,_||!A?Ue(x,A&&A.multi?function(w){var v=Ee(w,m);return ne(v)&&v.some(function(l){return f(b,l)})}:function(w){return f(b,Ee(w,m))}):x]},[null,null]),p=d[0],y=d[1];return p?this.where(p.name).equals(e[p.keyPath]).filter(y):r?this.filter(y):this.where(n).equals("")},t.prototype.filter=function(e){return this.toCollection().and(e)},t.prototype.count=function(e){return this.toCollection().count(e)},t.prototype.offset=function(e){return this.toCollection().offset(e)},t.prototype.limit=function(e){return this.toCollection().limit(e)},t.prototype.each=function(e){return this.toCollection().each(e)},t.prototype.toArray=function(e){return this.toCollection().toArray(e)},t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},t.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,ne(e)?"["+e.join("+")+"]":e))},t.prototype.reverse=function(){return this.toCollection().reverse()},t.prototype.mapToClass=function(e){this.schema.mappedClass=e;var n=function(r){if(!r)return r;var a=Object.create(e.prototype);for(var c in r)if(ce(r,c))try{a[c]=r[c]}catch{}return a};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e},t.prototype.defineClass=function(){function e(n){ie(this,n)}return this.mapToClass(e)},t.prototype.add=function(e,n){var r=this,a=this.schema.primKey,c=a.auto,f=a.keyPath,d=e;return f&&c&&(d=bt(f)(e)),this._trans("readwrite",function(p){return r.core.mutate({trans:p,type:"add",keys:n!=null?[n]:null,values:[d]})}).then(function(p){return p.numFailures?B.reject(p.failures[0]):p.lastResult}).then(function(p){if(f)try{fe(e,f,p)}catch{}return p})},t.prototype.update=function(e,n){if(typeof e=="object"&&!ne(e)){var r=Ee(e,this.schema.primKey.keyPath);if(r===void 0)return G(new D.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?X(n).forEach(function(a){fe(e,a,n[a])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}else return this.where(":id").equals(e).modify(n)},t.prototype.put=function(e,n){var r=this,a=this.schema.primKey,c=a.auto,f=a.keyPath,d=e;return f&&c&&(d=bt(f)(e)),this._trans("readwrite",function(p){return r.core.mutate({trans:p,type:"put",values:[d],keys:n!=null?[n]:null})}).then(function(p){return p.numFailures?B.reject(p.failures[0]):p.lastResult}).then(function(p){if(f)try{fe(e,f,p)}catch{}return p})},t.prototype.delete=function(e){var n=this;return this._trans("readwrite",function(r){return n.core.mutate({trans:r,type:"delete",keys:[e]})}).then(function(r){return r.numFailures?B.reject(r.failures[0]):void 0})},t.prototype.clear=function(){var e=this;return this._trans("readwrite",function(n){return e.core.mutate({trans:n,type:"deleteRange",range:Fr})}).then(function(n){return n.numFailures?B.reject(n.failures[0]):void 0})},t.prototype.bulkGet=function(e){var n=this;return this._trans("readonly",function(r){return n.core.getMany({keys:e,trans:r}).then(function(a){return a.map(function(c){return n.hook.reading.fire(c)})})})},t.prototype.bulkAdd=function(e,n,r){var a=this,c=Array.isArray(n)?n:void 0;r=r||(c?void 0:n);var f=r?r.allKeys:void 0;return this._trans("readwrite",function(d){var p=a.schema.primKey,y=p.auto,g=p.keyPath;if(g&&c)throw new D.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(c&&c.length!==e.length)throw new D.InvalidArgument("Arguments objects and keys must have the same length");var m=e.length,_=g&&y?e.map(bt(g)):e;return a.core.mutate({trans:d,type:"add",keys:c,values:_,wantResults:f}).then(function(x){var A=x.numFailures,b=x.results,w=x.lastResult,v=x.failures,l=f?b:w;if(A===0)return l;throw new nt(a.name+".bulkAdd(): "+A+" of "+m+" operations failed",v)})})},t.prototype.bulkPut=function(e,n,r){var a=this,c=Array.isArray(n)?n:void 0;r=r||(c?void 0:n);var f=r?r.allKeys:void 0;return this._trans("readwrite",function(d){var p=a.schema.primKey,y=p.auto,g=p.keyPath;if(g&&c)throw new D.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(c&&c.length!==e.length)throw new D.InvalidArgument("Arguments objects and keys must have the same length");var m=e.length,_=g&&y?e.map(bt(g)):e;return a.core.mutate({trans:d,type:"put",keys:c,values:_,wantResults:f}).then(function(x){var A=x.numFailures,b=x.results,w=x.lastResult,v=x.failures,l=f?b:w;if(A===0)return l;throw new nt(a.name+".bulkPut(): "+A+" of "+m+" operations failed",v)})})},t.prototype.bulkDelete=function(e){var n=this,r=e.length;return this._trans("readwrite",function(a){return n.core.mutate({trans:a,type:"delete",keys:e})}).then(function(a){var c=a.numFailures,f=a.lastResult,d=a.failures;if(c===0)return f;throw new nt(n.name+".bulkDelete(): "+c+" of "+r+" operations failed",d)})},t}();function yt(t){var e={},n=function(d,p){if(p){for(var y=arguments.length,g=new Array(y-1);--y;)g[y-1]=arguments[y];return e[d].subscribe.apply(null,g),t}else if(typeof d=="string")return e[d]};n.addEventType=c;for(var r=1,a=arguments.length;r<a;++r)c(arguments[r]);return n;function c(d,p,y){if(typeof d=="object")return f(d);p||(p=fi),y||(y=j);var g={subscribers:[],fire:y,subscribe:function(m){g.subscribers.indexOf(m)===-1&&(g.subscribers.push(m),g.fire=p(g.fire,m))},unsubscribe:function(m){g.subscribers=g.subscribers.filter(function(_){return _!==m}),g.fire=g.subscribers.reduce(p,y)}};return e[d]=n[d]=g,g}function f(d){X(d).forEach(function(p){var y=d[p];if(ne(y))c(p,d[p][0],d[p][1]);else if(y==="asap")var g=c(p,dt,function(){for(var _=arguments.length,x=new Array(_);_--;)x[_]=arguments[_];g.subscribers.forEach(function(A){fr(function(){A.apply(null,x)})})});else throw new D.InvalidArgument("Invalid event config")})}}function mt(t,e){return Ge(e).from({prototype:t}),e}function Si(t){return mt(Ci.prototype,function(n,r,a){this.db=t,this._tx=a,this.name=n,this.schema=r,this.hook=t._allTables[n]?t._allTables[n].hook:yt(null,{creating:[si,j],reading:[oi,dt],updating:[li,j],deleting:[ci,j]})})}function He(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function Yt(t,e){t.filter=Ue(t.filter,e)}function $t(t,e,n){var r=t.replayFilter;t.replayFilter=r?function(){return Ue(r(),e())}:e,t.justLimit=n&&!r}function Bi(t,e){t.isMatch=Ue(t.isMatch,e)}function Tt(t,e){if(t.isPrimKey)return e.primaryKey;var n=e.getIndexByKeyPath(t.index);if(!n)throw new D.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function Yn(t,e,n){var r=Tt(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function _t(t,e,n,r){var a=t.replayFilter?Ue(t.filter,t.replayFilter()):t.filter;if(t.or){var c={},f=function(d,p,y){if(!a||a(p,y,function(_){return p.stop(_)},function(_){return p.fail(_)})){var g=p.primaryKey,m=""+g;m==="[object ArrayBuffer]"&&(m=""+new Uint8Array(g)),ce(c,m)||(c[m]=!0,e(d,p,y))}};return Promise.all([t.or._iterate(f,n),$n(Yn(t,r,n),t.algorithm,f,!t.keysOnly&&t.valueMapper)])}else return $n(Yn(t,r,n),Ue(t.algorithm,a),e,!t.keysOnly&&t.valueMapper)}function $n(t,e,n,r){var a=r?function(f,d,p){return n(r(f),d,p)}:n,c=z(a);return t.then(function(f){if(f)return f.start(function(){var d=function(){return f.continue()};(!e||e(f,function(p){return d=p},function(p){f.stop(p),d=j},function(p){f.fail(p),d=j}))&&c(f.value,f,function(p){return d=p}),d()})})}function re(t,e){try{var n=Qn(t),r=Qn(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return Ki(Xn(t),Xn(e));case"Array":return Ti(t,e)}}catch{}return NaN}function Ti(t,e){for(var n=t.length,r=e.length,a=n<r?n:r,c=0;c<a;++c){var f=re(t[c],e[c]);if(f!==0)return f}return n===r?0:n<r?-1:1}function Ki(t,e){for(var n=t.length,r=e.length,a=n<r?n:r,c=0;c<a;++c)if(t[c]!==e[c])return t[c]<e[c]?-1:1;return n===r?0:n<r?-1:1}function Qn(t){var e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";var n=qt(t);return n==="ArrayBuffer"?"binary":n}function Xn(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}var Ii=function(){function t(){}return t.prototype._read=function(e,n){var r=this._ctx;return r.error?r.table._trans(null,G.bind(null,r.error)):r.table._trans("readonly",e).then(n)},t.prototype._write=function(e){var n=this._ctx;return n.error?n.table._trans(null,G.bind(null,n.error)):n.table._trans("readwrite",e,"locked")},t.prototype._addAlgorithm=function(e){var n=this._ctx;n.algorithm=Ue(n.algorithm,e)},t.prototype._iterate=function(e,n){return _t(this._ctx,e,n,this._ctx.table.core)},t.prototype.clone=function(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&ie(r,e),n._ctx=r,n},t.prototype.raw=function(){return this._ctx.valueMapper=null,this},t.prototype.each=function(e){var n=this._ctx;return this._read(function(r){return _t(n,e,r,n.table.core)})},t.prototype.count=function(e){var n=this;return this._read(function(r){var a=n._ctx,c=a.table.core;if(He(a,!0))return c.count({trans:r,query:{index:Tt(a,c.schema),range:a.range}}).then(function(d){return Math.min(d,a.limit)});var f=0;return _t(a,function(){return++f,!1},r,c).then(function(){return f})}).then(e)},t.prototype.sortBy=function(e,n){var r=e.split(".").reverse(),a=r[0],c=r.length-1;function f(y,g){return g?f(y[r[g]],g-1):y[a]}var d=this._ctx.dir==="next"?1:-1;function p(y,g){var m=f(y,c),_=f(g,c);return m<_?-d:m>_?d:0}return this.toArray(function(y){return y.sort(p)}).then(n)},t.prototype.toArray=function(e){var n=this;return this._read(function(r){var a=n._ctx;if(a.dir==="next"&&He(a,!0)&&a.limit>0){var c=a.valueMapper,f=Tt(a,a.table.core.schema);return a.table.core.query({trans:r,limit:a.limit,values:!0,query:{index:f,range:a.range}}).then(function(p){var y=p.result;return c?y.map(c):y})}else{var d=[];return _t(a,function(p){return d.push(p)},r,a.table.core).then(function(){return d})}},e)},t.prototype.offset=function(e){var n=this._ctx;return e<=0?this:(n.offset+=e,He(n)?$t(n,function(){var r=e;return function(a,c){return r===0?!0:r===1?(--r,!1):(c(function(){a.advance(r),r=0}),!1)}}):$t(n,function(){var r=e;return function(){return--r<0}}),this)},t.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),$t(this._ctx,function(){var n=e;return function(r,a,c){return--n<=0&&a(c),n>=0}},!0),this},t.prototype.until=function(e,n){return Yt(this._ctx,function(r,a,c){return e(r.value)?(a(c),n):!0}),this},t.prototype.first=function(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)},t.prototype.last=function(e){return this.reverse().first(e)},t.prototype.filter=function(e){return Yt(this._ctx,function(n){return e(n.value)}),Bi(this._ctx,e),this},t.prototype.and=function(e){return this.filter(e)},t.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},t.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},t.prototype.desc=function(){return this.reverse()},t.prototype.eachKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,a){e(a.key,a)})},t.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},t.prototype.eachPrimaryKey=function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,a){e(a.primaryKey,a)})},t.prototype.keys=function(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(a,c){r.push(c.key)}).then(function(){return r}).then(e)},t.prototype.primaryKeys=function(e){var n=this._ctx;if(n.dir==="next"&&He(n,!0)&&n.limit>0)return this._read(function(a){var c=Tt(n,n.table.core.schema);return n.table.core.query({trans:a,values:!1,limit:n.limit,query:{index:c,range:n.range}})}).then(function(a){var c=a.result;return c}).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(a,c){r.push(c.primaryKey)}).then(function(){return r}).then(e)},t.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},t.prototype.firstKey=function(e){return this.limit(1).keys(function(n){return n[0]}).then(e)},t.prototype.lastKey=function(e){return this.reverse().firstKey(e)},t.prototype.distinct=function(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return Yt(this._ctx,function(a){var c=a.primaryKey.toString(),f=ce(r,c);return r[c]=!0,!f}),this},t.prototype.modify=function(e){var n=this,r=this._ctx;return this._write(function(a){var c;if(typeof e=="function")c=e;else{var f=X(e),d=f.length;c=function(v){for(var l=!1,o=0;o<d;++o){var i=f[o],u=e[i];Ee(v,i)!==u&&(fe(v,i,u),l=!0)}return l}}var p=r.table.core,y=p.schema.primaryKey,g=y.outbound,m=y.extractKey,_=n.db._options.modifyChunkSize||200,x=[],A=0,b=[],w=function(v,l){var o=l.failures,i=l.numFailures;A+=v-i;for(var u=0,s=X(o);u<s.length;u++){var h=s[u];x.push(o[h])}};return n.clone().primaryKeys().then(function(v){var l=function(o){var i=Math.min(_,v.length-o);return p.getMany({trans:a,keys:v.slice(o,o+i),cache:"immutable"}).then(function(u){for(var s=[],h=[],E=g?[]:null,C=[],S=0;S<i;++S){var P=u[S],F={value:ht(P),primKey:v[o+S]};c.call(F,F.value,F)!==!1&&(F.value==null?C.push(v[o+S]):!g&&re(m(P),m(F.value))!==0?(C.push(v[o+S]),s.push(F.value)):(h.push(F.value),g&&E.push(v[o+S])))}var K=He(r)&&r.limit===1/0&&(typeof e!="function"||e===Qt)&&{index:r.index,range:r.range};return Promise.resolve(s.length>0&&p.mutate({trans:a,type:"add",values:s}).then(function(V){for(var I in V.failures)C.splice(parseInt(I),1);w(s.length,V)})).then(function(){return(h.length>0||K&&typeof e=="object")&&p.mutate({trans:a,type:"put",keys:E,values:h,criteria:K,changeSpec:typeof e!="function"&&e}).then(function(V){return w(h.length,V)})}).then(function(){return(C.length>0||K&&e===Qt)&&p.mutate({trans:a,type:"delete",keys:C,criteria:K}).then(function(V){return w(C.length,V)})}).then(function(){return v.length>o+i&&l(o+_)})})};return l(0).then(function(){if(x.length>0)throw new Kt("Error modifying one or more objects",x,A,b);return v.length})})})},t.prototype.delete=function(){var e=this._ctx,n=e.range;return He(e)&&(e.isPrimKey&&!Ei||n.type===3)?this._write(function(r){var a=e.table.core.schema.primaryKey,c=n;return e.table.core.count({trans:r,query:{index:a,range:c}}).then(function(f){return e.table.core.mutate({trans:r,type:"deleteRange",range:c}).then(function(d){var p=d.failures;d.lastResult,d.results;var y=d.numFailures;if(y)throw new Kt("Could not delete some values",Object.keys(p).map(function(g){return p[g]}),f-y);return f-y})})}):this.modify(Qt)},t}(),Qt=function(t,e){return e.value=null};function Fi(t){return mt(Ii.prototype,function(n,r){this.db=t;var a=Fr,c=null;if(r)try{a=r()}catch(y){c=y}var f=n._ctx,d=f.table,p=d.hook.reading.fire;this._ctx={table:d,index:f.index,isPrimKey:!f.index||d.schema.primKey.keyPath&&f.index===d.schema.primKey.name,range:a,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:c,or:f.or,valueMapper:p!==dt?p:null}})}function Di(t,e){return t<e?-1:t===e?0:1}function Pi(t,e){return t>e?-1:t===e?0:1}function se(t,e,n){var r=t instanceof Pr?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function We(t){return new t.Collection(t,function(){return Dr("")}).limit(0)}function Mi(t){return t==="next"?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function Oi(t){return t==="next"?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function Ri(t,e,n,r,a,c){for(var f=Math.min(t.length,r.length),d=-1,p=0;p<f;++p){var y=e[p];if(y!==r[p])return a(t[p],n[p])<0?t.substr(0,p)+n[p]+n.substr(p+1):a(t[p],r[p])<0?t.substr(0,p)+r[p]+n.substr(p+1):d>=0?t.substr(0,d)+e[d]+n.substr(d+1):null;a(t[p],y)<0&&(d=p)}return f<r.length&&c==="next"?t+n.substr(t.length):f<t.length&&c==="prev"?t.substr(0,n.length):d<0?null:t.substr(0,d)+r[d]+n.substr(d+1)}function wt(t,e,n,r){var a,c,f,d,p,y,g,m=n.length;if(!n.every(function(b){return typeof b=="string"}))return se(t,Kr);function _(b){a=Mi(b),c=Oi(b),f=b==="next"?Di:Pi;var w=n.map(function(v){return{lower:c(v),upper:a(v)}}).sort(function(v,l){return f(v.lower,l.lower)});d=w.map(function(v){return v.upper}),p=w.map(function(v){return v.lower}),y=b,g=b==="next"?"":r}_("next");var x=new t.Collection(t,function(){return Ke(d[0],p[m-1]+r)});x._ondirectionchange=function(b){_(b)};var A=0;return x._addAlgorithm(function(b,w,v){var l=b.key;if(typeof l!="string")return!1;var o=c(l);if(e(o,p,A))return!0;for(var i=null,u=A;u<m;++u){var s=Ri(l,o,d[u],p[u],f,y);s===null&&i===null?A=u+1:(i===null||f(i,s)>0)&&(i=s)}return w(i!==null?function(){b.continue(i+g)}:v),!1}),x}function Ke(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function Dr(t){return{type:1,lower:t,upper:t}}var Pr=function(){function t(){}return Object.defineProperty(t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),t.prototype.between=function(e,n,r,a){r=r!==!1,a=a===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||a)&&!(r&&a)?We(this):new this.Collection(this,function(){return Ke(e,n,!r,!a)})}catch{return se(this,_e)}},t.prototype.equals=function(e){return e==null?se(this,_e):new this.Collection(this,function(){return Dr(e)})},t.prototype.above=function(e){return e==null?se(this,_e):new this.Collection(this,function(){return Ke(e,void 0,!0)})},t.prototype.aboveOrEqual=function(e){return e==null?se(this,_e):new this.Collection(this,function(){return Ke(e,void 0,!1)})},t.prototype.below=function(e){return e==null?se(this,_e):new this.Collection(this,function(){return Ke(void 0,e,!1,!0)})},t.prototype.belowOrEqual=function(e){return e==null?se(this,_e):new this.Collection(this,function(){return Ke(void 0,e)})},t.prototype.startsWith=function(e){return typeof e!="string"?se(this,Kr):this.between(e,e+ke,!0,!0)},t.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):wt(this,function(n,r){return n.indexOf(r[0])===0},[e],ke)},t.prototype.equalsIgnoreCase=function(e){return wt(this,function(n,r){return n===r[0]},[e],"")},t.prototype.anyOfIgnoreCase=function(){var e=Ae.apply($e,arguments);return e.length===0?We(this):wt(this,function(n,r){return r.indexOf(n)!==-1},e,"")},t.prototype.startsWithAnyOfIgnoreCase=function(){var e=Ae.apply($e,arguments);return e.length===0?We(this):wt(this,function(n,r){return r.some(function(a){return n.indexOf(a)===0})},e,ke)},t.prototype.anyOf=function(){var e=this,n=Ae.apply($e,arguments),r=this._cmp;try{n.sort(r)}catch{return se(this,_e)}if(n.length===0)return We(this);var a=new this.Collection(this,function(){return Ke(n[0],n[n.length-1])});a._ondirectionchange=function(f){r=f==="next"?e._ascending:e._descending,n.sort(r)};var c=0;return a._addAlgorithm(function(f,d,p){for(var y=f.key;r(y,n[c])>0;)if(++c,c===n.length)return d(p),!1;return r(y,n[c])===0?!0:(d(function(){f.continue(n[c])}),!1)}),a},t.prototype.notEqual=function(e){return this.inAnyRange([[fn,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},t.prototype.noneOf=function(){var e=Ae.apply($e,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return se(this,_e)}var n=e.reduce(function(r,a){return r?r.concat([[r[r.length-1][1],a]]):[[fn,a]]},null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},t.prototype.inAnyRange=function(e,n){var r=this,a=this._cmp,c=this._ascending,f=this._descending,d=this._min,p=this._max;if(e.length===0)return We(this);if(!e.every(function(u){return u[0]!==void 0&&u[1]!==void 0&&c(u[0],u[1])<=0}))return se(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",D.InvalidArgument);var y=!n||n.includeLowers!==!1,g=n&&n.includeUppers===!0;function m(u,s){for(var h=0,E=u.length;h<E;++h){var C=u[h];if(a(s[0],C[1])<0&&a(s[1],C[0])>0){C[0]=d(C[0],s[0]),C[1]=p(C[1],s[1]);break}}return h===E&&u.push(s),u}var _=c;function x(u,s){return _(u[0],s[0])}var A;try{A=e.reduce(m,[]),A.sort(x)}catch{return se(this,_e)}var b=0,w=g?function(u){return c(u,A[b][1])>0}:function(u){return c(u,A[b][1])>=0},v=y?function(u){return f(u,A[b][0])>0}:function(u){return f(u,A[b][0])>=0};function l(u){return!w(u)&&!v(u)}var o=w,i=new this.Collection(this,function(){return Ke(A[0][0],A[A.length-1][1],!y,!g)});return i._ondirectionchange=function(u){u==="next"?(o=w,_=c):(o=v,_=f),A.sort(x)},i._addAlgorithm(function(u,s,h){for(var E=u.key;o(E);)if(++b,b===A.length)return s(h),!1;return l(E)?!0:(r._cmp(E,A[b][1])===0||r._cmp(E,A[b][0])===0||s(function(){_===c?u.continue(A[b][0]):u.continue(A[b][1])}),!1)}),i},t.prototype.startsWithAnyOf=function(){var e=Ae.apply($e,arguments);return e.every(function(n){return typeof n=="string"})?e.length===0?We(this):this.inAnyRange(e.map(function(n){return[n,n+ke]})):se(this,"startsWithAnyOf() only works with strings")},t}();function ki(t){return mt(Pr.prototype,function(n,r,a){this.db=t,this._ctx={table:n,index:r===":id"?null:r,or:a};var c=t._deps.indexedDB;if(!c)throw new D.MissingAPI;this._cmp=this._ascending=c.cmp.bind(c),this._descending=function(f,d){return c.cmp(d,f)},this._max=function(f,d){return c.cmp(f,d)>0?f:d},this._min=function(f,d){return c.cmp(f,d)<0?f:d},this._IDBKeyRange=t._deps.IDBKeyRange})}function pe(t){return z(function(e){return st(e),t(e.target.error),!1})}function st(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var ct="storagemutated",Fe="x-storagemutated-1",Me=yt(null,ct),ji=function(){function t(){}return t.prototype._lock=function(){return et(!T.global),++this._reculock,this._reculock===1&&!T.global&&(T.lockOwnerFor=this),this},t.prototype._unlock=function(){if(et(!T.global),--this._reculock===0)for(T.global||(T.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{Ze(e[1],e[0])}catch{}}return this},t.prototype._locked=function(){return this._reculock&&T.lockOwnerFor!==this},t.prototype.create=function(e){var n=this;if(!this.mode)return this;var r=this.db.idbdb,a=this.db._state.dbOpenError;if(et(!this.idbtrans),!e&&!r)switch(a&&a.name){case"DatabaseClosedError":throw new D.DatabaseClosed(a);case"MissingAPIError":throw new D.MissingAPI(a.message,a);default:throw new D.OpenFailed(a)}if(!this.active)throw new D.TransactionInactive;return et(this._completion._state===null),e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),e.onerror=z(function(c){st(c),n._reject(e.error)}),e.onabort=z(function(c){st(c),n.active&&n._reject(new D.Abort(e.error)),n.active=!1,n.on("abort").fire(c)}),e.oncomplete=z(function(){n.active=!1,n._resolve(),"mutatedParts"in e&&Me.storagemutated.fire(e.mutatedParts)}),this},t.prototype._promise=function(e,n,r){var a=this;if(e==="readwrite"&&this.mode!=="readwrite")return G(new D.ReadOnly("Transaction is readonly"));if(!this.active)return G(new D.TransactionInactive);if(this._locked())return new B(function(f,d){a._blockedFuncs.push([function(){a._promise(e,n,r).then(f,d)},T])});if(r)return De(function(){var f=new B(function(d,p){a._lock();var y=n(d,p,a);y&&y.then&&y.then(d,p)});return f.finally(function(){return a._unlock()}),f._lib=!0,f});var c=new B(function(f,d){var p=n(f,d,a);p&&p.then&&p.then(f,d)});return c._lib=!0,c},t.prototype._root=function(){return this.parent?this.parent._root():this},t.prototype.waitFor=function(e){var n=this._root(),r=B.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return r});else{n._waitingFor=r,n._waitingQueue=[];var a=n.idbtrans.objectStore(n.storeNames[0]);(function f(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(a.get(-1/0).onsuccess=f)})()}var c=n._waitingFor;return new B(function(f,d){r.then(function(p){return n._waitingQueue.push(z(f.bind(null,p)))},function(p){return n._waitingQueue.push(z(d.bind(null,p)))}).finally(function(){n._waitingFor===c&&(n._waitingFor=null)})})},t.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new D.Abort))},t.prototype.table=function(e){var n=this._memoizedTables||(this._memoizedTables={});if(ce(n,e))return n[e];var r=this.schema[e];if(!r)throw new D.NotFound("Table "+e+" not part of transaction");var a=new this.db.Table(e,r,this);return a.core=this.db.core.table(e),n[e]=a,a},t}();function Li(t){return mt(ji.prototype,function(n,r,a,c,f){var d=this;this.db=t,this.mode=n,this.storeNames=r,this.schema=a,this.chromeTransactionDurability=c,this.idbtrans=null,this.on=yt(this,"complete","error","abort"),this.parent=f||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new B(function(p,y){d._resolve=p,d._reject=y}),this._completion.then(function(){d.active=!1,d.on.complete.fire()},function(p){var y=d.active;return d.active=!1,d.on.error.fire(p),d.parent?d.parent._reject(p):y&&d.idbtrans&&d.idbtrans.abort(),G(p)})})}function hn(t,e,n,r,a,c,f){return{name:t,keyPath:e,unique:n,multi:r,auto:a,compound:c,src:(n&&!f?"&":"")+(r?"*":"")+(a?"++":"")+Mr(e)}}function Mr(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function Or(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:hr(n,function(r){return[r.name,r]})}}function Ni(t){return t.length===1?t[0]:t}var lt=function(t){try{return t.only([[]]),lt=function(){return[[]]},[[]]}catch{return lt=function(){return ke},ke}};function dn(t){return t==null?function(){}:typeof t=="string"?Ui(t):function(e){return Ee(e,t)}}function Ui(t){var e=t.split(".");return e.length===1?function(n){return n[t]}:function(n){return Ee(n,t)}}function Gn(t){return[].slice.call(t)}var zi=0;function it(t){return t==null?":id":typeof t=="string"?t:"["+t.join("+")+"]"}function Vi(t,e,n){function r(m,_){var x=Gn(m.objectStoreNames);return{schema:{name:m.name,tables:x.map(function(A){return _.objectStore(A)}).map(function(A){var b=A.keyPath,w=A.autoIncrement,v=ne(b),l=b==null,o={},i={name:A.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:l,compound:v,keyPath:b,autoIncrement:w,unique:!0,extractKey:dn(b)},indexes:Gn(A.indexNames).map(function(u){return A.index(u)}).map(function(u){var s=u.name,h=u.unique,E=u.multiEntry,C=u.keyPath,S=ne(C),P={name:s,compound:S,keyPath:C,unique:h,multiEntry:E,extractKey:dn(C)};return o[it(C)]=P,P}),getIndexByKeyPath:function(u){return o[it(u)]}};return o[":id"]=i.primaryKey,b!=null&&(o[it(b)]=i.primaryKey),i})},hasGetAll:x.length>0&&"getAll"in _.objectStore(x[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function a(m){if(m.type===3)return null;if(m.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var _=m.lower,x=m.upper,A=m.lowerOpen,b=m.upperOpen,w=_===void 0?x===void 0?null:e.upperBound(x,!!b):x===void 0?e.lowerBound(_,!!A):e.bound(_,x,!!A,!!b);return w}function c(m){var _=m.name;function x(w){var v=w.trans,l=w.type,o=w.keys,i=w.values,u=w.range;return new Promise(function(s,h){s=z(s);var E=v.objectStore(_),C=E.keyPath==null,S=l==="put"||l==="add";if(!S&&l!=="delete"&&l!=="deleteRange")throw new Error("Invalid operation type: "+l);var P=(o||i||{length:1}).length;if(o&&i&&o.length!==i.length)throw new Error("Given keys array must have same length as given values array.");if(P===0)return s({numFailures:0,failures:{},results:[],lastResult:void 0});var F,K=[],V=[],I=0,R=function(Q){++I,st(Q)};if(l==="deleteRange"){if(u.type===4)return s({numFailures:I,failures:V,results:[],lastResult:void 0});u.type===3?K.push(F=E.clear()):K.push(F=E.delete(a(u)))}else{var M=S?C?[i,o]:[i,null]:[o,null],$=M[0],H=M[1];if(S)for(var J=0;J<P;++J)K.push(F=H&&H[J]!==void 0?E[l]($[J],H[J]):E[l]($[J])),F.onerror=R;else for(var J=0;J<P;++J)K.push(F=E[l]($[J])),F.onerror=R}var Y=function(Q){var ae=Q.target.result;K.forEach(function(q,me){return q.error!=null&&(V[me]=q.error)}),s({numFailures:I,failures:V,results:l==="delete"?o:K.map(function(q){return q.result}),lastResult:ae})};F.onerror=function(Q){R(Q),Y(Q)},F.onsuccess=Y})}function A(w){var v=w.trans,l=w.values,o=w.query,i=w.reverse,u=w.unique;return new Promise(function(s,h){s=z(s);var E=o.index,C=o.range,S=v.objectStore(_),P=E.isPrimaryKey?S:S.index(E.name),F=i?u?"prevunique":"prev":u?"nextunique":"next",K=l||!("openKeyCursor"in P)?P.openCursor(a(C),F):P.openKeyCursor(a(C),F);K.onerror=pe(h),K.onsuccess=z(function(V){var I=K.result;if(!I){s(null);return}I.___id=++zi,I.done=!1;var R=I.continue.bind(I),M=I.continuePrimaryKey;M&&(M=M.bind(I));var $=I.advance.bind(I),H=function(){throw new Error("Cursor not started")},J=function(){throw new Error("Cursor not stopped")};I.trans=v,I.stop=I.continue=I.continuePrimaryKey=I.advance=H,I.fail=z(h),I.next=function(){var Y=this,Q=1;return this.start(function(){return Q--?Y.continue():Y.stop()}).then(function(){return Y})},I.start=function(Y){var Q=new Promise(function(q,me){q=z(q),K.onerror=pe(me),I.fail=me,I.stop=function(W){I.stop=I.continue=I.continuePrimaryKey=I.advance=J,q(W)}}),ae=function(){if(K.result)try{Y()}catch(q){I.fail(q)}else I.done=!0,I.start=function(){throw new Error("Cursor behind last entry")},I.stop()};return K.onsuccess=z(function(q){K.onsuccess=ae,ae()}),I.continue=R,I.continuePrimaryKey=M,I.advance=$,ae(),Q},s(I)},h)})}function b(w){return function(v){return new Promise(function(l,o){l=z(l);var i=v.trans,u=v.values,s=v.limit,h=v.query,E=s===1/0?void 0:s,C=h.index,S=h.range,P=i.objectStore(_),F=C.isPrimaryKey?P:P.index(C.name),K=a(S);if(s===0)return l({result:[]});if(w){var V=u?F.getAll(K,E):F.getAllKeys(K,E);V.onsuccess=function($){return l({result:$.target.result})},V.onerror=pe(o)}else{var I=0,R=u||!("openKeyCursor"in F)?F.openCursor(K):F.openKeyCursor(K),M=[];R.onsuccess=function($){var H=R.result;if(!H)return l({result:M});if(M.push(u?H.value:H.primaryKey),++I===s)return l({result:M});H.continue()},R.onerror=pe(o)}})}}return{name:_,schema:m,mutate:x,getMany:function(w){var v=w.trans,l=w.keys;return new Promise(function(o,i){o=z(o);for(var u=v.objectStore(_),s=l.length,h=new Array(s),E=0,C=0,S,P=function(I){var R=I.target;(h[R._pos]=R.result)!=null,++C===E&&o(h)},F=pe(i),K=0;K<s;++K){var V=l[K];V!=null&&(S=u.get(l[K]),S._pos=K,S.onsuccess=P,S.onerror=F,++E)}E===0&&o(h)})},get:function(w){var v=w.trans,l=w.key;return new Promise(function(o,i){o=z(o);var u=v.objectStore(_),s=u.get(l);s.onsuccess=function(h){return o(h.target.result)},s.onerror=pe(i)})},query:b(p),openCursor:A,count:function(w){var v=w.query,l=w.trans,o=v.index,i=v.range;return new Promise(function(u,s){var h=l.objectStore(_),E=o.isPrimaryKey?h:h.index(o.name),C=a(i),S=C?E.count(C):E.count();S.onsuccess=z(function(P){return u(P.target.result)}),S.onerror=pe(s)})}}}var f=r(t,n),d=f.schema,p=f.hasGetAll,y=d.tables.map(function(m){return c(m)}),g={};return y.forEach(function(m){return g[m.name]=m}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(m){var _=g[m];if(!_)throw new Error("Table '"+m+"' not found");return g[m]},MIN_KEY:-1/0,MAX_KEY:lt(e),schema:d}}function Hi(t,e){return e.reduce(function(n,r){var a=r.create;return O(O({},n),a(n))},t)}function Wi(t,e,n,r){var a=n.IDBKeyRange;n.indexedDB;var c=Hi(Vi(e,a,r),t.dbcore);return{dbcore:c}}function In(t,e){var n=t._novip,r=e.db,a=Wi(n._middlewares,r,n._deps,e);n.core=a.dbcore,n.tables.forEach(function(c){var f=c.name;n.core.schema.tables.some(function(d){return d.name===f})&&(c.core=n.core.table(f),n[f]instanceof n.Table&&(n[f].core=c.core))})}function Ot(t,e,n,r){var a=t._novip;n.forEach(function(c){var f=r[c];e.forEach(function(d){var p=wn(d,c);(!p||"value"in p&&p.value===void 0)&&(d===a.Transaction.prototype||d instanceof a.Transaction?Ce(d,c,{get:function(){return this.table(c)},set:function(y){cr(this,c,{value:y,writable:!0,configurable:!0,enumerable:!0})}}):d[c]=new a.Table(c,f))})})}function pn(t,e){var n=t._novip;e.forEach(function(r){for(var a in r)r[a]instanceof n.Table&&delete r[a]})}function Yi(t,e){return t._cfg.version-e._cfg.version}function $i(t,e,n,r){var a=t._dbSchema,c=t._createTransaction("readwrite",t._storeNames,a);c.create(n),c._completion.catch(r);var f=c._reject.bind(c),d=T.transless||T;De(function(){T.trans=c,T.transless=d,e===0?(X(a).forEach(function(p){Fn(n,p,a[p].primKey,a[p].indexes)}),In(t,n),B.follow(function(){return t.on.populate.fire(c)}).catch(f)):Qi(t,e,c,n).catch(f)})}function Qi(t,e,n,r){var a=t._novip,c=[],f=a._versions,d=a._dbSchema=Dn(a,a.idbdb,r),p=!1,y=f.filter(function(m){return m._cfg.version>=e});y.forEach(function(m){c.push(function(){var _=d,x=m._cfg.dbschema;yn(a,_,r),yn(a,x,r),d=a._dbSchema=x;var A=Rr(_,x);A.add.forEach(function(i){Fn(r,i[0],i[1].primKey,i[1].indexes)}),A.change.forEach(function(i){if(i.recreate)throw new D.Upgrade("Not yet support for changing primary key");var u=r.objectStore(i.name);i.add.forEach(function(s){return vn(u,s)}),i.change.forEach(function(s){u.deleteIndex(s.name),vn(u,s)}),i.del.forEach(function(s){return u.deleteIndex(s)})});var b=m._cfg.contentUpgrade;if(b&&m._cfg.version>e){In(a,r),n._memoizedTables={},p=!0;var w=dr(x);A.del.forEach(function(i){w[i]=_[i]}),pn(a,[a.Transaction.prototype]),Ot(a,[a.Transaction.prototype],X(w),w),n.schema=w;var v=An(b);v&&qe();var l,o=B.follow(function(){if(l=b(n),l&&v){var i=Se.bind(null,null);l.then(i,i)}});return l&&typeof l.then=="function"?B.resolve(l):o.then(function(){return l})}}),c.push(function(_){if(!p||!xi){var x=m._cfg.dbschema;Gi(x,_)}pn(a,[a.Transaction.prototype]),Ot(a,[a.Transaction.prototype],a._storeNames,a._dbSchema),n.schema=a._dbSchema})});function g(){return c.length?B.resolve(c.shift()(n.idbtrans)).then(g):B.resolve()}return g().then(function(){Xi(d,r)})}function Rr(t,e){var n={del:[],add:[],change:[]},r;for(r in t)e[r]||n.del.push(r);for(r in e){var a=t[r],c=e[r];if(!a)n.add.push([r,c]);else{var f={name:r,def:c,recreate:!1,del:[],add:[],change:[]};if(""+(a.primKey.keyPath||"")!=""+(c.primKey.keyPath||"")||a.primKey.auto!==c.primKey.auto&&!Ut)f.recreate=!0,n.change.push(f);else{var d=a.idxByName,p=c.idxByName,y=void 0;for(y in d)p[y]||f.del.push(y);for(y in p){var g=d[y],m=p[y];g?g.src!==m.src&&f.change.push(m):f.add.push(m)}(f.del.length>0||f.add.length>0||f.change.length>0)&&n.change.push(f)}}}return n}function Fn(t,e,n,r){var a=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(c){return vn(a,c)}),a}function Xi(t,e){X(t).forEach(function(n){e.db.objectStoreNames.contains(n)||Fn(e,n,t[n].primKey,t[n].indexes)})}function Gi(t,e){[].slice.call(e.db.objectStoreNames).forEach(function(n){return t[n]==null&&e.db.deleteObjectStore(n)})}function vn(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function Dn(t,e,n){var r={},a=Lt(e.objectStoreNames,0);return a.forEach(function(c){for(var f=n.objectStore(c),d=f.keyPath,p=hn(Mr(d),d||"",!1,!1,!!f.autoIncrement,d&&typeof d!="string",!0),y=[],g=0;g<f.indexNames.length;++g){var m=f.index(f.indexNames[g]);d=m.keyPath;var _=hn(m.name,d,!!m.unique,!!m.multiEntry,!1,d&&typeof d!="string",!1);y.push(_)}r[c]=Or(c,p,y)}),r}function Ji(t,e,n){var r=t._novip;r.verno=e.version/10;var a=r._dbSchema=Dn(r,e,n);r._storeNames=Lt(e.objectStoreNames,0),Ot(r,[r._allTables],X(a),a)}function qi(t,e){var n=Dn(t,t.idbdb,e),r=Rr(n,t._dbSchema);return!(r.add.length||r.change.some(function(a){return a.add.length||a.change.length}))}function yn(t,e,n){for(var r=t._novip,a=n.db.objectStoreNames,c=0;c<a.length;++c){var f=a[c],d=n.objectStore(f);r._hasGetAll="getAll"in d;for(var p=0;p<d.indexNames.length;++p){var y=d.indexNames[p],g=d.index(y).keyPath,m=typeof g=="string"?g:"["+Lt(g).join("+")+"]";if(e[f]){var _=e[f].idxByName[m];_&&(_.name=y,delete e[f].idxByName[m],e[f].idxByName[y]=_)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&N.WorkerGlobalScope&&N instanceof N.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(r._hasGetAll=!1)}function Zi(t){return t.split(",").map(function(e,n){e=e.trim();var r=e.replace(/([&*]|\+\+)/g,""),a=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return hn(r,a||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),ne(a),n===0)})}var eu=function(){function t(){}return t.prototype._parseStoresSpec=function(e,n){X(e).forEach(function(r){if(e[r]!==null){var a=Zi(e[r]),c=a.shift();if(c.multi)throw new D.Schema("Primary key cannot be multi-valued");a.forEach(function(f){if(f.auto)throw new D.Schema("Only primary key can be marked as autoIncrement (++)");if(!f.keyPath)throw new D.Schema("Index must have a name and cannot be an empty string")}),n[r]=Or(r,c,a)}})},t.prototype.stores=function(e){var n=this.db;this._cfg.storesSource=this._cfg.storesSource?ie(this._cfg.storesSource,e):e;var r=n._versions,a={},c={};return r.forEach(function(f){ie(a,f._cfg.storesSource),c=f._cfg.dbschema={},f._parseStoresSpec(a,c)}),n._dbSchema=c,pn(n,[n._allTables,n,n.Transaction.prototype]),Ot(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],X(c),c),n._storeNames=X(c),this},t.prototype.upgrade=function(e){return this._cfg.contentUpgrade=Cn(this._cfg.contentUpgrade||j,e),this},t}();function tu(t){return mt(eu.prototype,function(n){this.db=t,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Pn(t,e){var n=t._dbNamesDB;return n||(n=t._dbNamesDB=new kn(zt,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Mn(t){return t&&typeof t.databases=="function"}function nu(t){var e=t.indexedDB,n=t.IDBKeyRange;return Mn(e)?Promise.resolve(e.databases()).then(function(r){return r.map(function(a){return a.name}).filter(function(a){return a!==zt})}):Pn(e,n).toCollection().primaryKeys()}function ru(t,e){var n=t.indexedDB,r=t.IDBKeyRange;!Mn(n)&&e!==zt&&Pn(n,r).put({name:e}).catch(j)}function iu(t,e){var n=t.indexedDB,r=t.IDBKeyRange;!Mn(n)&&e!==zt&&Pn(n,r).delete(e).catch(j)}function mn(t){return De(function(){return T.letThrough=!0,t()})}function uu(){var t=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!t||!indexedDB.databases)return Promise.resolve();var e;return new Promise(function(n){var r=function(){return indexedDB.databases().finally(n)};e=setInterval(r,100),r()}).finally(function(){return clearInterval(e)})}function au(t){var e=t._state,n=t._deps.indexedDB;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(function(){return e.dbOpenError?G(e.dbOpenError):t});ye&&(e.openCanceller._stackHolder=ze()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;var r=e.openCanceller;function a(){if(e.openCanceller!==r)throw new D.DatabaseClosed("db.open() was cancelled")}var c=e.dbReadyResolve,f=null,d=!1;return B.race([r,(typeof navigator>"u"?B.resolve():uu()).then(function(){return new B(function(p,y){if(a(),!n)throw new D.MissingAPI;var g=t.name,m=e.autoSchema?n.open(g):n.open(g,Math.round(t.verno*10));if(!m)throw new D.MissingAPI;m.onerror=pe(y),m.onblocked=z(t._fireOnBlocked),m.onupgradeneeded=z(function(_){if(f=m.transaction,e.autoSchema&&!t._options.allowEmptyDB){m.onerror=st,f.abort(),m.result.close();var x=n.deleteDatabase(g);x.onsuccess=x.onerror=z(function(){y(new D.NoSuchDatabase("Database "+g+" doesnt exist"))})}else{f.onerror=pe(y);var A=_.oldVersion>Math.pow(2,62)?0:_.oldVersion;d=A<1,t._novip.idbdb=m.result,$i(t,A/10,f,y)}},y),m.onsuccess=z(function(){f=null;var _=t._novip.idbdb=m.result,x=Lt(_.objectStoreNames);if(x.length>0)try{var A=_.transaction(Ni(x),"readonly");e.autoSchema?Ji(t,_,A):(yn(t,t._dbSchema,A),qi(t,A)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),In(t,A)}catch{}rt.push(t),_.onversionchange=z(function(b){e.vcFired=!0,t.on("versionchange").fire(b)}),_.onclose=z(function(b){t.on("close").fire(b)}),d&&ru(t._deps,g),p()},y)})})]).then(function(){return a(),e.onReadyBeingFired=[],B.resolve(mn(function(){return t.on.ready.fire(t.vip)})).then(function p(){if(e.onReadyBeingFired.length>0){var y=e.onReadyBeingFired.reduce(Cn,j);return e.onReadyBeingFired=[],B.resolve(mn(function(){return y(t.vip)})).then(p)}})}).finally(function(){e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(function(){return t}).catch(function(p){e.dbOpenError=p;try{f&&f.abort()}catch{}return r===e.openCanceller&&t._close(),G(p)}).finally(function(){e.openComplete=!0,c()})}function gn(t){var e=function(f){return t.next(f)},n=function(f){return t.throw(f)},r=c(e),a=c(n);function c(f){return function(d){var p=f(d),y=p.value;return p.done?y:!y||typeof y.then!="function"?ne(y)?Promise.all(y).then(r,a):r(y):y.then(r,a)}}return c(e)()}function ou(t,e,n){var r=arguments.length;if(r<2)throw new D.InvalidArgument("Too few arguments");for(var a=new Array(r-1);--r;)a[r-1]=arguments[r];n=a.pop();var c=pr(a);return[t,c,n]}function kr(t,e,n,r,a){return B.resolve().then(function(){var c=T.transless||T,f=t._createTransaction(e,n,t._dbSchema,r),d={trans:f,transless:c};if(r)f.idbtrans=r.idbtrans;else try{f.create(),t._state.PR1398_maxLoop=3}catch(m){return m.name===En.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(function(){return kr(t,e,n,null,a)})):G(m)}var p=An(a);p&&qe();var y,g=B.follow(function(){if(y=a.call(f,f),y)if(p){var m=Se.bind(null,null);y.then(m,m)}else typeof y.next=="function"&&typeof y.throw=="function"&&(y=gn(y))},d);return(y&&typeof y.then=="function"?B.resolve(y).then(function(m){return f.active?m:G(new D.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):g.then(function(){return y})).then(function(m){return r&&f._resolve(),f._completion.then(function(){return m})}).catch(function(m){return f._reject(m),G(m)})})}function At(t,e,n){for(var r=ne(t)?t.slice():[t],a=0;a<n;++a)r.push(e);return r}function su(t){return O(O({},t),{table:function(e){var n=t.table(e),r=n.schema,a={},c=[];function f(b,w,v){var l=it(b),o=a[l]=a[l]||[],i=b==null?0:typeof b=="string"?1:b.length,u=w>0,s=O(O({},v),{isVirtual:u,keyTail:w,keyLength:i,extractKey:dn(b),unique:!u&&v.unique});if(o.push(s),s.isPrimaryKey||c.push(s),i>1){var h=i===2?b[0]:b.slice(0,i-1);f(h,w+1,v)}return o.sort(function(E,C){return E.keyTail-C.keyTail}),s}var d=f(r.primaryKey.keyPath,0,r.primaryKey);a[":id"]=[d];for(var p=0,y=r.indexes;p<y.length;p++){var g=y[p];f(g.keyPath,0,g)}function m(b){var w=a[it(b)];return w&&w[0]}function _(b,w){return{type:b.type===1?2:b.type,lower:At(b.lower,b.lowerOpen?t.MAX_KEY:t.MIN_KEY,w),lowerOpen:!0,upper:At(b.upper,b.upperOpen?t.MIN_KEY:t.MAX_KEY,w),upperOpen:!0}}function x(b){var w=b.query.index;return w.isVirtual?O(O({},b),{query:{index:w,range:_(b.query.range,w.keyTail)}}):b}var A=O(O({},n),{schema:O(O({},r),{primaryKey:d,indexes:c,getIndexByKeyPath:m}),count:function(b){return n.count(x(b))},query:function(b){return n.query(x(b))},openCursor:function(b){var w=b.query.index,v=w.keyTail,l=w.isVirtual,o=w.keyLength;if(!l)return n.openCursor(b);function i(u){function s(E){E!=null?u.continue(At(E,b.reverse?t.MAX_KEY:t.MIN_KEY,v)):b.unique?u.continue(u.key.slice(0,o).concat(b.reverse?t.MIN_KEY:t.MAX_KEY,v)):u.continue()}var h=Object.create(u,{continue:{value:s},continuePrimaryKey:{value:function(E,C){u.continuePrimaryKey(At(E,t.MAX_KEY,v),C)}},primaryKey:{get:function(){return u.primaryKey}},key:{get:function(){var E=u.key;return o===1?E[0]:E.slice(0,o)}},value:{get:function(){return u.value}}});return h}return n.openCursor(x(b)).then(function(u){return u&&i(u)})}});return A}})}var cu={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:su};function On(t,e,n,r){return n=n||{},r=r||"",X(t).forEach(function(a){if(!ce(e,a))n[r+a]=void 0;else{var c=t[a],f=e[a];if(typeof c=="object"&&typeof f=="object"&&c&&f){var d=qt(c),p=qt(f);d!==p?n[r+a]=e[a]:d==="Object"?On(c,f,n,r+a+"."):c!==f&&(n[r+a]=e[a])}else c!==f&&(n[r+a]=e[a])}}),X(e).forEach(function(a){ce(t,a)||(n[r+a]=e[a])}),n}function lu(t,e){return e.type==="delete"?e.keys:e.keys||e.values.map(t.extractKey)}var fu={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return O(O({},t),{table:function(e){var n=t.table(e),r=n.schema.primaryKey,a=O(O({},n),{mutate:function(c){var f=T.trans,d=f.table(e).hook,p=d.deleting,y=d.creating,g=d.updating;switch(c.type){case"add":if(y.fire===j)break;return f._promise("readwrite",function(){return m(c)},!0);case"put":if(y.fire===j&&g.fire===j)break;return f._promise("readwrite",function(){return m(c)},!0);case"delete":if(p.fire===j)break;return f._promise("readwrite",function(){return m(c)},!0);case"deleteRange":if(p.fire===j)break;return f._promise("readwrite",function(){return _(c)},!0)}return n.mutate(c);function m(A){var b=T.trans,w=A.keys||lu(r,A);if(!w)throw new Error("Keys missing");return A=A.type==="add"||A.type==="put"?O(O({},A),{keys:w}):O({},A),A.type!=="delete"&&(A.values=Gt([],A.values,!0)),A.keys&&(A.keys=Gt([],A.keys,!0)),hu(n,A,w).then(function(v){var l=w.map(function(o,i){var u=v[i],s={onerror:null,onsuccess:null};if(A.type==="delete")p.fire.call(s,o,u,b);else if(A.type==="add"||u===void 0){var h=y.fire.call(s,o,A.values[i],b);o==null&&h!=null&&(o=h,A.keys[i]=o,r.outbound||fe(A.values[i],r.keyPath,o))}else{var E=On(u,A.values[i]),C=g.fire.call(s,E,o,u,b);if(C){var S=A.values[i];Object.keys(C).forEach(function(P){ce(S,P)?S[P]=C[P]:fe(S,P,C[P])})}}return s});return n.mutate(A).then(function(o){for(var i=o.failures,u=o.results,s=o.numFailures,h=o.lastResult,E=0;E<w.length;++E){var C=u?u[E]:w[E],S=l[E];C==null?S.onerror&&S.onerror(i[E]):S.onsuccess&&S.onsuccess(A.type==="put"&&v[E]?A.values[E]:C)}return{failures:i,results:u,numFailures:s,lastResult:h}}).catch(function(o){return l.forEach(function(i){return i.onerror&&i.onerror(o)}),Promise.reject(o)})})}function _(A){return x(A.trans,A.range,1e4)}function x(A,b,w){return n.query({trans:A,values:!1,query:{index:r,range:b},limit:w}).then(function(v){var l=v.result;return m({type:"delete",keys:l,trans:A}).then(function(o){return o.numFailures>0?Promise.reject(o.failures[0]):l.length<w?{failures:[],numFailures:0,lastResult:void 0}:x(A,O(O({},b),{lower:l[l.length-1],lowerOpen:!0}),w)})})}}});return a}})}};function hu(t,e,n){return e.type==="add"?Promise.resolve([]):t.getMany({trans:e.trans,keys:n,cache:"immutable"})}function jr(t,e,n){try{if(!e||e.keys.length<t.length)return null;for(var r=[],a=0,c=0;a<e.keys.length&&c<t.length;++a)re(e.keys[a],t[c])===0&&(r.push(n?ht(e.values[a]):e.values[a]),++c);return r.length===t.length?r:null}catch{return null}}var du={stack:"dbcore",level:-1,create:function(t){return{table:function(e){var n=t.table(e);return O(O({},n),{getMany:function(r){if(!r.cache)return n.getMany(r);var a=jr(r.keys,r.trans._cache,r.cache==="clone");return a?B.resolve(a):n.getMany(r).then(function(c){return r.trans._cache={keys:r.keys,values:r.cache==="clone"?ht(c):c},c})},mutate:function(r){return r.type!=="add"&&(r.trans._cache=null),n.mutate(r)}})}}}},Xt;function Rn(t){return!("from"in t)}var we=function(t,e){if(this)ie(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0});else{var n=new we;return t&&"d"in t&&ie(n,t),n}};Xe(we.prototype,(Xt={add:function(t){return Rt(this,t),this},addKey:function(t){return ft(this,t,t),this},addKeys:function(t){var e=this;return t.forEach(function(n){return ft(e,n,n)}),this}},Xt[Zt]=function(){return bn(this)},Xt));function ft(t,e,n){var r=re(e,n);if(!isNaN(r)){if(r>0)throw RangeError();if(Rn(t))return ie(t,{from:e,to:n,d:1});var a=t.l,c=t.r;if(re(n,t.from)<0)return a?ft(a,e,n):t.l={from:e,to:n,d:1,l:null,r:null},Jn(t);if(re(e,t.to)>0)return c?ft(c,e,n):t.r={from:e,to:n,d:1,l:null,r:null},Jn(t);re(e,t.from)<0&&(t.from=e,t.l=null,t.d=c?c.d+1:1),re(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);var f=!t.r;a&&!t.l&&Rt(t,a),c&&f&&Rt(t,c)}}function Rt(t,e){function n(r,a){var c=a.from,f=a.to,d=a.l,p=a.r;ft(r,c,f),d&&n(r,d),p&&n(r,p)}Rn(e)||n(t,e)}function pu(t,e){var n=bn(e),r=n.next();if(r.done)return!1;for(var a=r.value,c=bn(t),f=c.next(a.from),d=f.value;!r.done&&!f.done;){if(re(d.from,a.to)<=0&&re(d.to,a.from)>=0)return!0;re(a.from,d.from)<0?a=(r=n.next(d.from)).value:d=(f=c.next(a.from)).value}return!1}function bn(t){var e=Rn(t)?null:{s:0,n:t};return{next:function(n){for(var r=arguments.length>0;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&re(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||re(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function Jn(t){var e,n,r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),a=r>1?"r":r<-1?"l":"";if(a){var c=a==="r"?"l":"r",f=O({},t),d=t[a];t.from=d.from,t.to=d.to,t[a]=d[a],f[a]=d[c],t[c]=f,f.d=qn(f)}t.d=qn(t)}function qn(t){var e=t.r,n=t.l;return(e?n?Math.max(e.d,n.d):e.d:n?n.d:0)+1}var vu={stack:"dbcore",level:0,create:function(t){var e=t.schema.name,n=new we(t.MIN_KEY,t.MAX_KEY);return O(O({},t),{table:function(r){var a=t.table(r),c=a.schema,f=c.primaryKey,d=f.extractKey,p=f.outbound,y=O(O({},a),{mutate:function(_){var x=_.trans,A=x.mutatedParts||(x.mutatedParts={}),b=function(h){var E="idb://"+e+"/"+r+"/"+h;return A[E]||(A[E]=new we)},w=b(""),v=b(":dels"),l=_.type,o=_.type==="deleteRange"?[_.range]:_.type==="delete"?[_.keys]:_.values.length<50?[[],_.values]:[],i=o[0],u=o[1],s=_.trans._cache;return a.mutate(_).then(function(h){if(ne(i)){l!=="delete"&&(i=h.results),w.addKeys(i);var E=jr(i,s);!E&&l!=="add"&&v.addKeys(i),(E||u)&&yu(b,c,E,u)}else if(i){var C={from:i.lower,to:i.upper};v.add(C),w.add(C)}else w.add(n),v.add(n),c.indexes.forEach(function(S){return b(S.name).add(n)});return h})}}),g=function(_){var x,A,b=_.query,w=b.index,v=b.range;return[w,new we((x=v.lower)!==null&&x!==void 0?x:t.MIN_KEY,(A=v.upper)!==null&&A!==void 0?A:t.MAX_KEY)]},m={get:function(_){return[f,new we(_.key)]},getMany:function(_){return[f,new we().addKeys(_.keys)]},count:g,query:g,openCursor:g};return X(m).forEach(function(_){y[_]=function(x){var A=T.subscr;if(A){var b=function(s){var h="idb://"+e+"/"+r+"/"+s;return A[h]||(A[h]=new we)},w=b(""),v=b(":dels"),l=m[_](x),o=l[0],i=l[1];if(b(o.name||"").add(i),!o.isPrimaryKey)if(_==="count")v.add(n);else{var u=_==="query"&&p&&x.values&&a.query(O(O({},x),{values:!1}));return a[_].apply(this,arguments).then(function(s){if(_==="query"){if(p&&x.values)return u.then(function(S){var P=S.result;return w.addKeys(P),s});var h=x.values?s.result.map(d):s.result;x.values?w.addKeys(h):v.addKeys(h)}else if(_==="openCursor"){var E=s,C=x.values;return E&&Object.create(E,{key:{get:function(){return v.addKey(E.primaryKey),E.key}},primaryKey:{get:function(){var S=E.primaryKey;return v.addKey(S),S}},value:{get:function(){return C&&w.addKey(E.primaryKey),E.value}}})}return s})}}return a[_].apply(this,arguments)}}),y}})}};function yu(t,e,n,r){function a(c){var f=t(c.name||"");function d(y){return y!=null?c.extractKey(y):null}var p=function(y){return c.multiEntry&&ne(y)?y.forEach(function(g){return f.addKey(g)}):f.addKey(y)};(n||r).forEach(function(y,g){var m=n&&d(n[g]),_=r&&d(r[g]);re(m,_)!==0&&(m!=null&&p(m),_!=null&&p(_))})}e.indexes.forEach(a)}var kn=function(){function t(e,n){var r=this;this._middlewares={},this.verno=0;var a=t.dependencies;this._options=n=O({addons:t.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var c=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var f={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:j,dbReadyPromise:null,cancelOpen:j,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};f.dbReadyPromise=new B(function(d){f.dbReadyResolve=d}),f.openCanceller=new B(function(d,p){f.cancelOpen=p}),this._state=f,this.name=e,this.on=yt(this,"populate","blocked","versionchange","close",{ready:[Cn,j]}),this.on.ready.subscribe=lr(this.on.ready.subscribe,function(d){return function(p,y){t.vip(function(){var g=r._state;if(g.openComplete)g.dbOpenError||B.resolve().then(p),y&&d(p);else if(g.onReadyBeingFired)g.onReadyBeingFired.push(p),y&&d(p);else{d(p);var m=r;y||d(function _(){m.on.ready.unsubscribe(p),m.on.ready.unsubscribe(_)})}})}}),this.Collection=Fi(this),this.Table=Si(this),this.Transaction=Li(this),this.Version=tu(this),this.WhereClause=ki(this),this.on("versionchange",function(d){d.newVersion>0?console.warn("Another connection wants to upgrade database '"+r.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+r.name+"'. Closing db now to resume the delete request."),r.close()}),this.on("blocked",function(d){!d.newVersion||d.newVersion<d.oldVersion?console.warn("Dexie.delete('"+r.name+"') was blocked"):console.warn("Upgrade '"+r.name+"' blocked by other connection holding version "+d.oldVersion/10)}),this._maxKey=lt(n.IDBKeyRange),this._createTransaction=function(d,p,y,g){return new r.Transaction(d,p,y,r._options.chromeTransactionDurability,g)},this._fireOnBlocked=function(d){r.on("blocked").fire(d),rt.filter(function(p){return p.name===r.name&&p!==r&&!p._state.vcFired}).map(function(p){return p.on("versionchange").fire(d)})},this.use(cu),this.use(fu),this.use(vu),this.use(du),this.vip=Object.create(this,{_vip:{value:!0}}),c.forEach(function(d){return d(r)})}return t.prototype.version=function(e){if(isNaN(e)||e<.1)throw new D.Type("Given version is not a positive number");if(e=Math.round(e*10)/10,this.idbdb||this._state.isBeingOpened)throw new D.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var n=this._versions,r=n.filter(function(a){return a._cfg.version===e})[0];return r||(r=new this.Version(e),n.push(r),n.sort(Yi),r.stores({}),this._state.autoSchema=!1,r)},t.prototype._whenReady=function(e){var n=this;return this.idbdb&&(this._state.openComplete||T.letThrough||this._vip)?e():new B(function(r,a){if(n._state.openComplete)return a(new D.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._options.autoOpen){a(new D.DatabaseClosed);return}n.open().catch(j)}n._state.dbReadyPromise.then(r,a)}).then(e)},t.prototype.use=function(e){var n=e.stack,r=e.create,a=e.level,c=e.name;c&&this.unuse({stack:n,name:c});var f=this._middlewares[n]||(this._middlewares[n]=[]);return f.push({stack:n,create:r,level:a==null?10:a,name:c}),f.sort(function(d,p){return d.level-p.level}),this},t.prototype.unuse=function(e){var n=e.stack,r=e.name,a=e.create;return n&&this._middlewares[n]&&(this._middlewares[n]=this._middlewares[n].filter(function(c){return a?c.create!==a:r?c.name!==r:!1})),this},t.prototype.open=function(){return au(this)},t.prototype._close=function(){var e=this._state,n=rt.indexOf(this);if(n>=0&&rt.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new B(function(r){e.dbReadyResolve=r}),e.openCanceller=new B(function(r,a){e.cancelOpen=a})},t.prototype.close=function(){this._close();var e=this._state;this._options.autoOpen=!1,e.dbOpenError=new D.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)},t.prototype.delete=function(){var e=this,n=arguments.length>0,r=this._state;return new B(function(a,c){var f=function(){e.close();var d=e._deps.indexedDB.deleteDatabase(e.name);d.onsuccess=z(function(){iu(e._deps,e.name),a()}),d.onerror=pe(c),d.onblocked=e._fireOnBlocked};if(n)throw new D.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(f):f()})},t.prototype.backendDB=function(){return this.idbdb},t.prototype.isOpen=function(){return this.idbdb!==null},t.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},t.prototype.hasFailed=function(){return this._state.dbOpenError!==null},t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(t.prototype,"tables",{get:function(){var e=this;return X(this._allTables).map(function(n){return e._allTables[n]})},enumerable:!1,configurable:!0}),t.prototype.transaction=function(){var e=ou.apply(this,arguments);return this._transaction.apply(this,e)},t.prototype._transaction=function(e,n,r){var a=this,c=T.trans;(!c||c.db!==this||e.indexOf("!")!==-1)&&(c=null);var f=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");var d,p;try{if(p=n.map(function(g){var m=g instanceof a.Table?g.name:g;if(typeof m!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return m}),e=="r"||e===Ht)d=Ht;else if(e=="rw"||e==Wt)d=Wt;else throw new D.InvalidArgument("Invalid transaction mode: "+e);if(c){if(c.mode===Ht&&d===Wt)if(f)c=null;else throw new D.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");c&&p.forEach(function(g){if(c&&c.storeNames.indexOf(g)===-1)if(f)c=null;else throw new D.SubTransaction("Table "+g+" not included in parent transaction.")}),f&&c&&!c.active&&(c=null)}}catch(g){return c?c._promise(null,function(m,_){_(g)}):G(g)}var y=kr.bind(null,this,d,p,c,r);return c?c._promise(d,y,"lock"):T.trans?Ze(T.transless,function(){return a._whenReady(y)}):this._whenReady(y)},t.prototype.table=function(e){if(!ce(this._allTables,e))throw new D.InvalidTable("Table "+e+" does not exist");return this._allTables[e]},t}(),mu=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",gu=function(){function t(e){this._subscribe=e}return t.prototype.subscribe=function(e,n,r){return this._subscribe(!e||typeof e=="function"?{next:e,error:n,complete:r}:e)},t.prototype[mu]=function(){return this},t}();function Lr(t,e){return X(e).forEach(function(n){var r=t[n]||(t[n]=new we);Rt(r,e[n])}),t}function bu(t){return new gu(function(e){var n=An(t);function r(x){n&&qe();var A=function(){return De(t,{subscr:x,trans:null})},b=T.trans?Ze(T.transless,A):A();return n&&b.then(Se,Se),b}var a=!1,c={},f={},d={get closed(){return a},unsubscribe:function(){a=!0,Me.storagemutated.unsubscribe(m)}};e.start&&e.start(d);var p=!1,y=!1;function g(){return X(f).some(function(x){return c[x]&&pu(c[x],f[x])})}var m=function(x){Lr(c,x),g()&&_()},_=function(){if(!(p||a)){c={};var x={},A=r(x);y||(Me(ct,m),y=!0),p=!0,Promise.resolve(A).then(function(b){p=!1,!a&&(g()?_():(c={},f=x,e.next&&e.next(b)))},function(b){p=!1,e.error&&e.error(b),d.unsubscribe()})}};return _(),d})}var _n;try{_n={indexedDB:N.indexedDB||N.mozIndexedDB||N.webkitIndexedDB||N.msIndexedDB,IDBKeyRange:N.IDBKeyRange||N.webkitIDBKeyRange}}catch{_n={indexedDB:null,IDBKeyRange:null}}var Re=kn;Xe(Re,O(O({},Nt),{delete:function(t){var e=new Re(t,{addons:[]});return e.delete()},exists:function(t){return new Re(t,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return nu(Re.dependencies).then(t)}catch{return G(new D.MissingAPI)}},defineClass:function(){function t(e){ie(this,e)}return t},ignoreTransaction:function(t){return T.trans?Ze(T.transless,t):t()},vip:mn,async:function(t){return function(){try{var e=gn(t.apply(this,arguments));return!e||typeof e.then!="function"?B.resolve(e):e}catch(n){return G(n)}}},spawn:function(t,e,n){try{var r=gn(t.apply(n,e||[]));return!r||typeof r.then!="function"?B.resolve(r):r}catch(a){return G(a)}},currentTransaction:{get:function(){return T.trans||null}},waitFor:function(t,e){var n=B.resolve(typeof t=="function"?Re.ignoreTransaction(t):t).timeout(e||6e4);return T.trans?T.trans.waitFor(n):n},Promise:B,debug:{get:function(){return ye},set:function(t){yr(t,t==="dexie"?function(){return!0}:Ir)}},derive:Ge,extend:ie,props:Xe,override:lr,Events:yt,on:Me,liveQuery:bu,extendObservabilitySet:Lr,getByKeyPath:Ee,setByKeyPath:fe,delByKeyPath:Jr,shallowClone:dr,deepClone:ht,getObjectDiff:On,cmp:re,asap:fr,minKey:fn,addons:[],connections:rt,errnames:En,dependencies:_n,semVer:Wn,version:Wn.split(".").map(function(t){return parseInt(t)}).reduce(function(t,e,n){return t+e/Math.pow(10,n*2)})}));Re.maxKey=lt(Re.dependencies.IDBKeyRange);typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Me(ct,function(t){if(!xe){var e;Ut?(e=document.createEvent("CustomEvent"),e.initCustomEvent(Fe,!0,!0,t)):e=new CustomEvent(Fe,{detail:t}),xe=!0,dispatchEvent(e),xe=!1}}),addEventListener(Fe,function(t){var e=t.detail;xe||kt(e)}));function kt(t){var e=xe;try{xe=!0,Me.storagemutated.fire(t)}finally{xe=e}}var xe=!1;if(typeof BroadcastChannel<"u"){var Zn=new BroadcastChannel(Fe);Me(ct,function(t){xe||Zn.postMessage(t)}),Zn.onmessage=function(t){t.data&&kt(t.data)}}else if(typeof self<"u"&&typeof navigator<"u"){Me(ct,function(t){try{xe||(typeof localStorage<"u"&&localStorage.setItem(Fe,JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&Gt([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(e){return e.postMessage({type:Fe,changedParts:t})}))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",function(t){if(t.key===Fe){var e=JSON.parse(t.newValue);e&&kt(e.changedParts)}});var er=self.document&&navigator.serviceWorker;er&&er.addEventListener("message",_u)}function _u(t){var e=t.data;e&&e.type===Fe&&kt(e.changedParts)}B.rejectionMapper=ai;yr(ye,Ir);class wu extends kn{constructor(){super("fileDataBase");Ln(this,"files");this.version(2).stores({files:"++id, spaceName"})}}const Z=new wu,Au=()=>{self.onmessage=function(t){(function(r){if(typeof exports=="object")module.exports=r();else if(typeof define=="function"&&define.amd)define(r);else{var a;try{a=window}catch{a=self}a.SparkMD5=r()}})(function(r){var a=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function c(l,o){var i=l[0],u=l[1],s=l[2],h=l[3];i+=(u&s|~u&h)+o[0]-680876936|0,i=(i<<7|i>>>25)+u|0,h+=(i&u|~i&s)+o[1]-389564586|0,h=(h<<12|h>>>20)+i|0,s+=(h&i|~h&u)+o[2]+606105819|0,s=(s<<17|s>>>15)+h|0,u+=(s&h|~s&i)+o[3]-1044525330|0,u=(u<<22|u>>>10)+s|0,i+=(u&s|~u&h)+o[4]-176418897|0,i=(i<<7|i>>>25)+u|0,h+=(i&u|~i&s)+o[5]+1200080426|0,h=(h<<12|h>>>20)+i|0,s+=(h&i|~h&u)+o[6]-1473231341|0,s=(s<<17|s>>>15)+h|0,u+=(s&h|~s&i)+o[7]-45705983|0,u=(u<<22|u>>>10)+s|0,i+=(u&s|~u&h)+o[8]+1770035416|0,i=(i<<7|i>>>25)+u|0,h+=(i&u|~i&s)+o[9]-1958414417|0,h=(h<<12|h>>>20)+i|0,s+=(h&i|~h&u)+o[10]-42063|0,s=(s<<17|s>>>15)+h|0,u+=(s&h|~s&i)+o[11]-1990404162|0,u=(u<<22|u>>>10)+s|0,i+=(u&s|~u&h)+o[12]+1804603682|0,i=(i<<7|i>>>25)+u|0,h+=(i&u|~i&s)+o[13]-40341101|0,h=(h<<12|h>>>20)+i|0,s+=(h&i|~h&u)+o[14]-1502002290|0,s=(s<<17|s>>>15)+h|0,u+=(s&h|~s&i)+o[15]+1236535329|0,u=(u<<22|u>>>10)+s|0,i+=(u&h|s&~h)+o[1]-165796510|0,i=(i<<5|i>>>27)+u|0,h+=(i&s|u&~s)+o[6]-1069501632|0,h=(h<<9|h>>>23)+i|0,s+=(h&u|i&~u)+o[11]+643717713|0,s=(s<<14|s>>>18)+h|0,u+=(s&i|h&~i)+o[0]-373897302|0,u=(u<<20|u>>>12)+s|0,i+=(u&h|s&~h)+o[5]-701558691|0,i=(i<<5|i>>>27)+u|0,h+=(i&s|u&~s)+o[10]+38016083|0,h=(h<<9|h>>>23)+i|0,s+=(h&u|i&~u)+o[15]-660478335|0,s=(s<<14|s>>>18)+h|0,u+=(s&i|h&~i)+o[4]-405537848|0,u=(u<<20|u>>>12)+s|0,i+=(u&h|s&~h)+o[9]+568446438|0,i=(i<<5|i>>>27)+u|0,h+=(i&s|u&~s)+o[14]-1019803690|0,h=(h<<9|h>>>23)+i|0,s+=(h&u|i&~u)+o[3]-187363961|0,s=(s<<14|s>>>18)+h|0,u+=(s&i|h&~i)+o[8]+1163531501|0,u=(u<<20|u>>>12)+s|0,i+=(u&h|s&~h)+o[13]-1444681467|0,i=(i<<5|i>>>27)+u|0,h+=(i&s|u&~s)+o[2]-51403784|0,h=(h<<9|h>>>23)+i|0,s+=(h&u|i&~u)+o[7]+1735328473|0,s=(s<<14|s>>>18)+h|0,u+=(s&i|h&~i)+o[12]-1926607734|0,u=(u<<20|u>>>12)+s|0,i+=(u^s^h)+o[5]-378558|0,i=(i<<4|i>>>28)+u|0,h+=(i^u^s)+o[8]-2022574463|0,h=(h<<11|h>>>21)+i|0,s+=(h^i^u)+o[11]+1839030562|0,s=(s<<16|s>>>16)+h|0,u+=(s^h^i)+o[14]-35309556|0,u=(u<<23|u>>>9)+s|0,i+=(u^s^h)+o[1]-1530992060|0,i=(i<<4|i>>>28)+u|0,h+=(i^u^s)+o[4]+1272893353|0,h=(h<<11|h>>>21)+i|0,s+=(h^i^u)+o[7]-155497632|0,s=(s<<16|s>>>16)+h|0,u+=(s^h^i)+o[10]-1094730640|0,u=(u<<23|u>>>9)+s|0,i+=(u^s^h)+o[13]+681279174|0,i=(i<<4|i>>>28)+u|0,h+=(i^u^s)+o[0]-358537222|0,h=(h<<11|h>>>21)+i|0,s+=(h^i^u)+o[3]-722521979|0,s=(s<<16|s>>>16)+h|0,u+=(s^h^i)+o[6]+76029189|0,u=(u<<23|u>>>9)+s|0,i+=(u^s^h)+o[9]-640364487|0,i=(i<<4|i>>>28)+u|0,h+=(i^u^s)+o[12]-421815835|0,h=(h<<11|h>>>21)+i|0,s+=(h^i^u)+o[15]+530742520|0,s=(s<<16|s>>>16)+h|0,u+=(s^h^i)+o[2]-995338651|0,u=(u<<23|u>>>9)+s|0,i+=(s^(u|~h))+o[0]-198630844|0,i=(i<<6|i>>>26)+u|0,h+=(u^(i|~s))+o[7]+1126891415|0,h=(h<<10|h>>>22)+i|0,s+=(i^(h|~u))+o[14]-1416354905|0,s=(s<<15|s>>>17)+h|0,u+=(h^(s|~i))+o[5]-57434055|0,u=(u<<21|u>>>11)+s|0,i+=(s^(u|~h))+o[12]+1700485571|0,i=(i<<6|i>>>26)+u|0,h+=(u^(i|~s))+o[3]-1894986606|0,h=(h<<10|h>>>22)+i|0,s+=(i^(h|~u))+o[10]-1051523|0,s=(s<<15|s>>>17)+h|0,u+=(h^(s|~i))+o[1]-2054922799|0,u=(u<<21|u>>>11)+s|0,i+=(s^(u|~h))+o[8]+1873313359|0,i=(i<<6|i>>>26)+u|0,h+=(u^(i|~s))+o[15]-30611744|0,h=(h<<10|h>>>22)+i|0,s+=(i^(h|~u))+o[6]-1560198380|0,s=(s<<15|s>>>17)+h|0,u+=(h^(s|~i))+o[13]+1309151649|0,u=(u<<21|u>>>11)+s|0,i+=(s^(u|~h))+o[4]-145523070|0,i=(i<<6|i>>>26)+u|0,h+=(u^(i|~s))+o[11]-1120210379|0,h=(h<<10|h>>>22)+i|0,s+=(i^(h|~u))+o[2]+718787259|0,s=(s<<15|s>>>17)+h|0,u+=(h^(s|~i))+o[9]-343485551|0,u=(u<<21|u>>>11)+s|0,l[0]=i+l[0]|0,l[1]=u+l[1]|0,l[2]=s+l[2]|0,l[3]=h+l[3]|0}function f(l){var o=[],i;for(i=0;i<64;i+=4)o[i>>2]=l.charCodeAt(i)+(l.charCodeAt(i+1)<<8)+(l.charCodeAt(i+2)<<16)+(l.charCodeAt(i+3)<<24);return o}function d(l){var o=[],i;for(i=0;i<64;i+=4)o[i>>2]=l[i]+(l[i+1]<<8)+(l[i+2]<<16)+(l[i+3]<<24);return o}function p(l){var o=l.length,i=[1732584193,-271733879,-1732584194,271733878],u,s,h,E,C,S;for(u=64;u<=o;u+=64)c(i,f(l.substring(u-64,u)));for(l=l.substring(u-64),s=l.length,h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],u=0;u<s;u+=1)h[u>>2]|=l.charCodeAt(u)<<(u%4<<3);if(h[u>>2]|=128<<(u%4<<3),u>55)for(c(i,h),u=0;u<16;u+=1)h[u]=0;return E=o*8,E=E.toString(16).match(/(.*?)(.{0,8})$/),C=parseInt(E[2],16),S=parseInt(E[1],16)||0,h[14]=C,h[15]=S,c(i,h),i}function y(l){var o=l.length,i=[1732584193,-271733879,-1732584194,271733878],u,s,h,E,C,S;for(u=64;u<=o;u+=64)c(i,d(l.subarray(u-64,u)));for(l=u-64<o?l.subarray(u-64):new Uint8Array(0),s=l.length,h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],u=0;u<s;u+=1)h[u>>2]|=l[u]<<(u%4<<3);if(h[u>>2]|=128<<(u%4<<3),u>55)for(c(i,h),u=0;u<16;u+=1)h[u]=0;return E=o*8,E=E.toString(16).match(/(.*?)(.{0,8})$/),C=parseInt(E[2],16),S=parseInt(E[1],16)||0,h[14]=C,h[15]=S,c(i,h),i}function g(l){var o="",i;for(i=0;i<4;i+=1)o+=a[l>>i*8+4&15]+a[l>>i*8&15];return o}function m(l){var o;for(o=0;o<l.length;o+=1)l[o]=g(l[o]);return l.join("")}m(p("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function l(o,i){return o=o|0||0,o<0?Math.max(o+i,0):Math.min(o,i)}ArrayBuffer.prototype.slice=function(o,i){var u=this.byteLength,s=l(o,u),h=u,E,C,S,P;return i!==r&&(h=l(i,u)),s>h?new ArrayBuffer(0):(E=h-s,C=new ArrayBuffer(E),S=new Uint8Array(C),P=new Uint8Array(this,s,E),S.set(P),C)}}();function _(l){return/[\u0080-\uFFFF]/.test(l)&&(l=unescape(encodeURIComponent(l))),l}function x(l,o){var i=l.length,u=new ArrayBuffer(i),s=new Uint8Array(u),h;for(h=0;h<i;h+=1)s[h]=l.charCodeAt(h);return o?s:u}function A(l){return String.fromCharCode.apply(null,new Uint8Array(l))}function b(l,o,i){var u=new Uint8Array(l.byteLength+o.byteLength);return u.set(new Uint8Array(l)),u.set(new Uint8Array(o),l.byteLength),i?u:u.buffer}function w(l){var o=[],i=l.length,u;for(u=0;u<i-1;u+=2)o.push(parseInt(l.substr(u,2),16));return String.fromCharCode.apply(String,o)}function v(){this.reset()}return v.prototype.append=function(l){return this.appendBinary(_(l)),this},v.prototype.appendBinary=function(l){this._buff+=l,this._length+=l.length;var o=this._buff.length,i;for(i=64;i<=o;i+=64)c(this._hash,f(this._buff.substring(i-64,i)));return this._buff=this._buff.substring(i-64),this},v.prototype.end=function(l){var o=this._buff,i=o.length,u,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],h;for(u=0;u<i;u+=1)s[u>>2]|=o.charCodeAt(u)<<(u%4<<3);return this._finish(s,i),h=m(this._hash),l&&(h=w(h)),this.reset(),h},v.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},v.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},v.prototype.setState=function(l){return this._buff=l.buff,this._length=l.length,this._hash=l.hash,this},v.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},v.prototype._finish=function(l,o){var i=o,u,s,h;if(l[i>>2]|=128<<(i%4<<3),i>55)for(c(this._hash,l),i=0;i<16;i+=1)l[i]=0;u=this._length*8,u=u.toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(u[2],16),h=parseInt(u[1],16)||0,l[14]=s,l[15]=h,c(this._hash,l)},v.hash=function(l,o){return v.hashBinary(_(l),o)},v.hashBinary=function(l,o){var i=p(l),u=m(i);return o?w(u):u},v.ArrayBuffer=function(){this.reset()},v.ArrayBuffer.prototype.append=function(l){var o=b(this._buff.buffer,l,!0),i=o.length,u;for(this._length+=l.byteLength,u=64;u<=i;u+=64)c(this._hash,d(o.subarray(u-64,u)));return this._buff=u-64<i?new Uint8Array(o.buffer.slice(u-64)):new Uint8Array(0),this},v.ArrayBuffer.prototype.end=function(l){var o=this._buff,i=o.length,u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],s,h;for(s=0;s<i;s+=1)u[s>>2]|=o[s]<<(s%4<<3);return this._finish(u,i),h=m(this._hash),l&&(h=w(h)),this.reset(),h},v.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},v.ArrayBuffer.prototype.getState=function(){var l=v.prototype.getState.call(this);return l.buff=A(l.buff),l},v.ArrayBuffer.prototype.setState=function(l){return l.buff=x(l.buff,!0),v.prototype.setState.call(this,l)},v.ArrayBuffer.prototype.destroy=v.prototype.destroy,v.ArrayBuffer.prototype._finish=v.prototype._finish,v.ArrayBuffer.hash=function(l,o){var i=y(new Uint8Array(l)),u=m(i);return o?w(u):u},v});const e=t.data,n=e.data;try{const r=SparkMD5.hash(n);postMessage({result:!0,data:r,index:e.index,task:e.task})}catch(r){postMessage({result:!1,data:r,index:e.index,task:e.task})}}},xu=(t,e)=>new Array(e).fill(!0).map(()=>new Worker(t)),Ye={};let tr=!1;const Eu=(t,e)=>{let n=0,r=0;const a=c=>{const f=c.data;f.result?Ye[f.task][f.index].resolve(f.data):Ye[f.task][f.index].reject(f.data)};return tr||(t.forEach(c=>{c.addEventListener("message",a)}),tr=!0),c=>{let f=()=>{},d=()=>{};const p=new Promise((y,g)=>{f=y,d=g;const m=t.length;t[r].postMessage({data:c,index:n,task:e}),r>=m-1?r=0:r++});return Ye[e]||(Ye[e]=[]),Ye[e][n]={resolve:f,reject:d},n++,p.finally(()=>{Ye[e][n]=void 0})}},jn=t=>{let e=-1;return t.some((r,a)=>(e=a,r.status==="waiting"))?t[e]:void 0},ue=t=>t.filter(e=>e.status!=="cancel").reverse(),jt=(t=0,{idRef:e,upload:n,updateUploadDataList:r,computeProgress:a,update:c,resolve:f,reject:d,sliceStartRef:p,length:y,index:g,numberOfChunks:m,chunks:_,customParamsRef:x,retryCountLimit:A,_retryCountRef:b,suspendedRef:w,canceledRef:v,currentUploadListRef:l,offlineStorage:o,spaceName:i,file:u,currentUpdateDataRef:s,hashSum:h,currentNumberOfRequestRef:E,maxNumberOfRequest:C},S)=>{if(v.current)return;const P=K=>{b.current<A?(b.current++,jt(K,{idRef:e,upload:n,updateUploadDataList:r,computeProgress:a,update:c,resolve:f,reject:d,sliceStartRef:p,length:y,index:g,numberOfChunks:m,chunks:_,customParamsRef:x,retryCountLimit:A,_retryCountRef:b,suspendedRef:w,canceledRef:v,currentUploadListRef:l,offlineStorage:o,spaceName:i,file:u,currentUpdateDataRef:s,hashSum:h,currentNumberOfRequestRef:E,maxNumberOfRequest:C})):(p.current=K,r(g,{status:"failure",progress:a(K)}),c(ue(l.current)),d(K))};if(S&&E.current<C)r(g,{status:"uploading"}),c(ue(l.current)),e.current!==void 0&&(typeof e.current=="number"?Z.files.update(e.current,{status:"uploading"}):e.current.then(K=>{Z.files.update(K,{status:"uploading"})})),E.current++;else if(S&&E.current>=C){r(g,{status:"waiting"}),c(ue(l.current)),e.current!==void 0&&(typeof e.current=="number"?Z.files.update(e.current,{status:"waiting"}):e.current.then(K=>{Z.files.update(K,{status:"waiting"})}));return}const F=t+m;n({chunks:_.slice(t,F),start:t,end:F-1,size:y,hashSum:h},x.current).then(K=>{if(!(w.current||v.current)){if(o&&e.current!==void 0&&(typeof e.current=="number"?Z.files.update(e.current,{status:"uploading",start:F,end:F+m,customParams:x.current}):s.current={status:"uploading",start:F,end:F+m,customParams:x.current}),b.current=0,x.current=K,p.current=F,r(g,{status:"uploading",progress:a(F)}),c(ue(l.current)),F>=y){E.current--,p.current=y,r(g,{status:"completed",progress:a(y),result:K}),c(ue(l.current)),f(!0),e.current!==void 0&&(typeof e.current=="number"?Z.files.delete(e.current):e.current.then(I=>{Z.files.delete(I)}));const V=jn(l.current);V&&V.resume();return}jt(F,{idRef:e,upload:n,updateUploadDataList:r,computeProgress:a,update:c,resolve:f,reject:d,sliceStartRef:p,length:y,index:g,numberOfChunks:m,chunks:_,customParamsRef:x,retryCountLimit:A,_retryCountRef:b,suspendedRef:w,canceledRef:v,currentUploadListRef:l,offlineStorage:o,spaceName:i,file:u,currentUpdateDataRef:s,hashSum:h,currentNumberOfRequestRef:E,maxNumberOfRequest:C})}}).catch(()=>{w.current||v.current||(o&&e.current!==void 0&&(typeof e.current=="number"?Z.files.update(e.current,{status:"failure",start:t,end:t+m}):s.current={status:"failure",start:t,end:t+m}),P(t))})},Cu=(()=>{let t,e;const n=new Blob([`(${Au})()`],{type:"application/javascript"}),r=URL.createObjectURL(n);return({sliceSize:a,minSlicedFileSize:c,numberOfChunks:f,retryCountLimit:d,multiple:p,accept:y,offlineStorage:g,spaceName:m,immediately:_,sizeLimit:x,numberOfThreads:A,openHash:b,maxNumberOfRequest:w,upload:v,update:l,checkHash:o},i,u,s)=>{const h=A>1?xu(r,A):[];return e=async E=>{if(E.target){const C=Array.from(E.target.files).filter(S=>x?S.size>=x[0]&&S.size<=x[1]:!0);if(C){const S={current:0},P=R=>({status:"initialization",progress:0,file:C[R],result:null}),F=C.map((R,M)=>{const $=P(M),H=i.length;return i[H]=$,$}),K=(R,M)=>(Reflect.ownKeys(M).forEach($=>{F[R][$]=M[$]}),F);l(ue(i));const V=C.map(async(R,M)=>{const $=new Yr,H=[],J=R.size,Y={current:0};let Q=0,ae="";const q=de=>de/Q;if(J>=c){const de=Math.ceil(J/a),ge=Eu(h,`${Math.random().toFixed(6)}-${M}`),L=[];for(let oe=0;oe<de;oe++){const Te=R.slice(oe*a,(oe+1)*a);if(H.push(Te),b&&A>1){const Ve=await Te.text();L[oe]=ge(Ve)}else if(b&&A<=1){const Ve=await Te.text();$.append(Ve)}}if(Q=H.length,b){if(A>1?ae=(await Promise.all(L)).reduce((Te,Ve)=>Te+Ve,""):ae=$.end(),o){const oe=await o(ae);oe===!0?(Y.current=Q,K(M,{status:"completed",progress:1}),l(ue(i))):typeof oe=="number"&&(Y.current=oe,K(M,{status:"suspended",progress:q(oe)}),l(ue(i)))}}else K(M,{status:"suspended"}),l(ue(i))}else H.push(R),Q=H.length;const me={current:0},W={current:!1},Be={current:!1},le={current:void 0},he={current:i},Oe={current:void 0};return new Promise(async(de,ge)=>{let L={current:void 0};const oe=()=>{if(W.current=!0,F[M].status==="uploading"){S.current--,K(M,{status:"suspended",progress:q(Y.current)}),l(ue(i));const be=jn(he.current);be&&be.resume(),L.current!==void 0&&typeof L.current!="number"?L.current.then(Ur=>{Z.files.update(Ur,{status:"suspended",start:Y.current,end:Y.current+f})}):typeof L.current=="number"&&Z.files.update(L.current,{status:"suspended",start:Y.current,end:Y.current+f})}},Te=()=>{if(F[M].status==="initialization"||F[M].status==="suspended"||F[M].status==="failure"){me.current=0,W.current=!1;const be=Y.current;jt(be,{idRef:L,upload:v,updateUploadDataList:K,computeProgress:q,update:l,resolve:de,reject:ge,sliceStartRef:Y,length:Q,index:M,numberOfChunks:f,chunks:H,customParamsRef:le,retryCountLimit:d,_retryCountRef:me,suspendedRef:W,canceledRef:Be,currentUploadListRef:he,offlineStorage:g,spaceName:m,file:C[M],currentUpdateDataRef:Oe,hashSum:ae,currentNumberOfRequestRef:S,maxNumberOfRequest:w},!0)}};K(M,{pause:oe,resume:Te,remove:()=>{S.current--,Be.current=!0,K(M,{status:"cancel"}),l(ue(i)),L.current!==void 0&&typeof L.current!="number"?L.current.then(be=>{Z.files.delete(be)}):typeof L.current=="number"&&Z.files.delete(L.current),de(!0)}}),g&&Y.current<Q&&(L.current=Z.files.add({file:C[M],chunks:H,status:"suspended",start:0,end:f,customParams:le.current,spaceName:m||"",hashSum:ae}),L.current.then(be=>{Oe.current&&(Z.files.update(be,Oe.current),L.current=be)})),_&&Y.current<Q&&Te()})}),I=await Promise.all(V);if(I.every(R=>R===!0))u();else{const R=I.reduce((M,$,H)=>($!==!0&&M.push(H),M),[]).map(M=>C[M]);s(R)}}}},t?(t.value="",t):(t=document.createElement("input"),t.style.display="none",t.type="file",t.multiple=!!p,t.accept=y,t.addEventListener("change",E=>e(E)),t)}})(),Su=(t,e)=>{const r=t.children.length;for(let a=r-1;a>=0;a--)if(t.children[a]===e)return!0},Nr=t=>({...{sliceSize:1e5,minSlicedFileSize:1e6,numberOfChunks:1,retryCountLimit:3,multiple:!0,accept:"",offlineStorage:!1,spaceName:"",immediately:!0,sizeLimit:null,numberOfThreads:3,openHash:!0,maxNumberOfRequest:6,gotCache:()=>{},update:()=>{},error:n=>{console.error("Large-File-Uploader occurred errors, error detail:"),console.error(n)},success:()=>{},checkHash:void 0},...t}),Bu=(t,e,n,r)=>{const a=Nr(e),c=document.body,f=Cu(a,t,n,r);Su(c,f)||document.body.appendChild(f),f.click()},Tu=async(t,{spaceName:e})=>{const n=await Z.files.where("spaceName").equals(e).toArray(),r=n.length,a=t.length;if(r&&a)for(let c=a-1;c>=0;c--)t[c+r]=t[c];return n.map((c,f)=>(t[f]={status:"suspended",progress:c.start/c.chunks.length,isCache:!0,file:c.file,result:null},{name:c.file.name,file:c.file,status:"suspended",progress:c.start/c.chunks.length,result:null,fileObject:c}))},nr=t=>{const e=Nr(t),n=[];let r,a;const c=new Promise((y,g)=>{r=y,a=g});let f,d;const p=new Promise((y,g)=>{f=y,d=g});return Promise.all([c,p]).then(()=>{e.success({result:!0,data:n})}).catch(y=>{e.error(y)}),e.offlineStorage?Tu(n,e).then(y=>{const g={current:0},m=Promise.all(y.map((_,x)=>new Promise((A,b)=>{const w={current:!1},v={current:!1},l={current:_.fileObject.start},o={current:0},i={current:_.fileObject.customParams},u={current:n},s=(P,F)=>(n[P]={...n[P],...F},n),h=P=>P/_.fileObject.chunks.length,E=()=>{if(w.current=!0,n[x].status==="uploading"){g.current--,s(x,{status:"suspended",progress:h(l.current)}),e.update(ue(n));const P=jn(u.current);P&&P.resume(),Z.files.update(_.fileObject.id,{status:"suspended",start:l.current,end:l.current+e.numberOfChunks})}},C=()=>{if(n[x].status==="initialization"||n[x].status==="suspended"||n[x].status==="failure"){o.current=0,w.current=!1;const P=l.current;jt(P,{idRef:{current:_.fileObject.id},upload:e.upload,updateUploadDataList:s,computeProgress:h,update:e.update,resolve:A,reject:b,sliceStartRef:l,length:_.fileObject.chunks.length,index:x,numberOfChunks:e.numberOfChunks,chunks:_.fileObject.chunks,customParamsRef:i,retryCountLimit:e.retryCountLimit,_retryCountRef:o,suspendedRef:w,canceledRef:v,currentUploadListRef:u,offlineStorage:e.offlineStorage,spaceName:e.spaceName,file:_.fileObject.file,hashSum:_.fileObject.hashSum,currentNumberOfRequestRef:g,maxNumberOfRequest:e.maxNumberOfRequest},!0)}},S=()=>{g.current--,v.current=!0,n[x].status="cancel",e.update(ue(n)),Z.files.delete(_.fileObject.id),A(!0)};n[x].pause=E,n[x].resume=C,n[x].remove=S})));return e.gotCache(n.slice(0,y.length),n),e.update(ue(n)),m}).then(()=>{r()}).catch(y=>{a(y)}):r(),{uploadFile:()=>Bu(n,t,f,d)}},rr=()=>new Promise(t=>{setTimeout(()=>{t(123456)},300)}),Ku=(t,e)=>new Promise(n=>{setTimeout(()=>{n(!0)},100/e*1e3)}),Iu=(t,e)=>new Promise((n,r)=>{setTimeout(()=>{Math.random()<=.6?(console.log(`${t.id}: failure`),r(!1)):n(!0)},100/e*1e3)}),Fu="/large-file-uploader/site/assets/delete.6a07f587.svg",Du=ve.div`
  height: 100vh;
`,Pu=ve.div`
  padding-top: 40px;
  display: flex;
  align-items: center;
  gap: 8px;
`,ir=ve.p`
  margin-top: 40px;
  text-align: center;
`,Mu=ve.div`
  padding: 8px 40px;
  display: flex;
  justify-content: space-around;
  align-items: flex-start;
`,Ou=ve.div`
  padding: 20px;
  display: flex;
  flex-flow: column nowrap;
  align-items: center;
`,Ru=ve.div`
  padding: 20px;
  display: flex;
  flex-flow: column nowrap;
  align-items: center;
`,ur=ve.div`
  display: flex;
  align-items: center;
`,ku=ve(({children:t,className:e,onClick:n})=>U("div",{className:e,children:U("button",{onClick:n,children:t})}))`
  margin-top: 20px;
  text-align: center;
`,ju=ve.div`
  margin-left: 20px;
  padding: 4px;
  width: 20px;
  height: 20px;
  background: url("${Fu}") center / cover no-repeat;
  &:hover {
    background-color: rgba(0, 0, 0, 0.1);
  }
`,ar=({uploader:t})=>{const e=t.status==="suspended",n=t.status==="failure",r=t.status==="completed",a=t.status==="initialization";return ee(ur,{children:[ee("div",{style:{width:"200px"},children:[ee("p",{children:["\u6587\u4EF6\u540D\uFF1A",t.file.name]}),ee(ur,{children:["\u8FDB\u5EA6\uFF1A",U(Wr,{progress:t.progress})]}),ee("p",{children:["\u72B6\u6001: ",t.status]})]}),U("div",{children:r||a?null:U("button",{style:n?{backgroundColor:"#f56c6c",color:"#fff"}:void 0,onClick:e||n?t.resume:t.pause,children:e?"\u5F00\u59CB":n?"\u6062\u590D":"\u6682\u505C"})}),U(ju,{onClick:t.remove})]})},or=ve.div`
  margin-top: 20px;
  padding: 20px;
  border: 1px solid #888;
  border-radius: 16px;
  width: 360px;
  height: 500px;
  overflow-y: auto;

  &::-webkit-scrollbar-track {
    -webkit-box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);
    border-radius: 10px;
    background-color: var(--TRANSPARENT);
  }
  &::-webkit-scrollbar {
    width: 8px;
    background-color: var(--TRANSPARENT);
  }
  &::-webkit-scrollbar-thumb {
    border-radius: 10px;
    -webkit-box-shadow: inset 0 0 6px rgba(255, 255, 255, 0.3);
    background-color: var(--SCROLLBAR_THUMB_COLOR);
  }
`,Uu=()=>{const t=Hr(),[e,n]=k.exports.useState(!0),[r,a]=k.exports.useState(!0),[c,f]=k.exports.useState(null),[d,p]=k.exports.useState(!0),[y,g]=k.exports.useState(""),[m,_]=k.exports.useState(6),[x,A]=k.exports.useState(3),[b,w]=k.exports.useState(!0),[v,l]=k.exports.useState(5),[o,i]=k.exports.useState(""),[u,s]=k.exports.useState(100),[h,E]=k.exports.useState([]),[C,S]=k.exports.useState([]),[P,F]=k.exports.useState(!e),[K,V]=k.exports.useState(!1),I=k.exports.useRef(null),R=k.exports.useRef(null),M=k.exports.useMemo(()=>o?new Function("hash",`return (${o})(hash)`):void 0,[o]);k.exports.useEffect(()=>{const W=nr({offlineStorage:e,immediately:r,sizeLimit:c,multiple:d,accept:y,maxNumberOfRequest:m,retryCountLimit:x,openHash:b,numberOfThreads:v,checkHash:M,spaceName:"normal",minSlicedFileSize:5e3,sliceSize:1e3,async upload({chunks:le,start:he,end:Oe,size:de},ge){let L=ge;return ge===void 0&&(L=await rr()),await Ku({id:L,chunks:le,start:he,end:Oe,size:de},u),L},gotCache(le,he){F(!0),E(he)},update(le){E(le)}});I.current=W.uploadFile;const Be=nr({offlineStorage:e,immediately:r,sizeLimit:c,multiple:d,accept:y,maxNumberOfRequest:m,retryCountLimit:x,openHash:b,numberOfThreads:v,checkHash:M,spaceName:"maybeFailure",minSlicedFileSize:1e4,sliceSize:1e3,async upload({chunks:le,start:he,end:Oe,size:de},ge){let L=ge;return ge===void 0&&(L=await rr()),await Iu({id:L,chunks:le,start:he,end:Oe,size:de},u),L},gotCache(le,he){V(!0),S(he)},update(le){S(le)}});return R.current=Be.uploadFile,()=>{q(),me()}},[e,r,c,d,y,m,x,b,v,o,u]);const $=k.exports.useCallback(()=>{I.current&&I.current()},[]),H=k.exports.useCallback(()=>{R.current&&R.current()},[]),J=k.exports.useCallback(()=>{h.forEach(W=>W.pause())},[h]),Y=k.exports.useCallback(()=>{h.forEach(W=>W.resume())},[h]),Q=k.exports.useCallback(()=>{C.forEach(W=>W.pause())},[C]),ae=k.exports.useCallback(()=>{C.forEach(W=>W.resume())},[C]),q=k.exports.useCallback(()=>{h.forEach(W=>W.remove())},[h]),me=k.exports.useCallback(()=>{C.forEach(W=>W.remove())},[C]);return ee(Du,{children:[ee(Pu,{children:[U("button",{onClick:()=>{t("/")},children:"\u9996\u9875"}),U("h3",{children:">"}),U("h3",{children:"Demo"})]}),U(ir,{className:"read-the-docs",children:"\u4E0A\u4F20\u53EF\u4E00\u6B21\u6027\u9009\u591A\u4E2A\u6587\u4EF6\uFF0C\u6BCF\u4E2A\u4E0A\u4F20\u9879\u53EF\u5355\u72EC\u6682\u505C/\u6062\u590D/\u5220\u9664\u3002\u8BF7\u6C42\u5931\u8D25\u81EA\u52A8\u91CD\u8BD5\uFF0C\u9ED8\u8BA4\u81EA\u52A8\u91CD\u8BD53\u6B21\u7136\u540E\u8F6C\u4E3A\u624B\u52A8\u91CD\u8BD5\u3002"}),U(ir,{className:"read-the-docs",style:{marginTop:"-12px"},children:"demo\u4E2D\u7684\u4E0A\u4F20\u5668\u6700\u5C0F\u5206\u7247\u9650\u5236\u5DF2\u88AB\u8BBE\u7F6E\u4E3A5kb\uFF0C\u22655kb\u7684\u5C0F\u6587\u4EF6\u4E5F\u53EF\u4F53\u9A8C\u65AD\u70B9\u7EED\u4F20\u6548\u679C\u3002"}),U(ku,{onClick:()=>t("/api"),children:"\u67E5\u770BAPI\u6587\u6863"}),ee(Mu,{children:[ee(Ou,{children:[U("h3",{children:"\u8BF7\u6C42100%\u6210\u529F"}),ee("div",{style:{textAlign:"center"},children:[U("button",{onClick:$,children:"\u9009\u62E9\u4E0A\u4F20\u6587\u4EF6"}),h.length?ee("div",{style:{marginTop:"20px"},children:[U("button",{onClick:J,children:"\u5168\u90E8\u6682\u505C"}),U("button",{onClick:Y,children:"\u5168\u90E8\u5F00\u59CB"})]}):null]}),ee(or,{children:[h.map((W,Be)=>U(ar,{uploader:W},Be)),P?null:U(Nn,{type:"block"})]})]}),ee(Ru,{children:[U("h3",{children:"\u8BF7\u6C4260%\u51E0\u7387\u5931\u8D25"}),ee("div",{style:{textAlign:"center"},children:[U("button",{onClick:H,children:"\u9009\u62E9\u4E0A\u4F20\u6587\u4EF6"}),C.length?ee("div",{style:{marginTop:"20px"},children:[U("button",{onClick:Q,children:"\u5168\u90E8\u6682\u505C"}),U("button",{onClick:ae,children:"\u5168\u90E8\u5F00\u59CB"})]}):null]}),ee(or,{children:[C.map((W,Be)=>U(ar,{uploader:W},Be)),K?null:U(Nn,{type:"block"})]})]})]})]})};export{Pu as Nav,Uu as default};
